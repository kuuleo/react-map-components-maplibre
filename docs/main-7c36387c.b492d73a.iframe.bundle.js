"use strict";(self.webpackChunk_mapcomponents_react_maplibre=self.webpackChunk_mapcomponents_react_maplibre||[]).push([[852],{29975:(t,e,r)=>{r.r(e),r.d(e,{ExampleConfig:()=>b,__namedExportsOrder:()=>g,default:()=>y});var n=r(67294),o=r(31072),a=function(t){var e=(0,o.Z)({mapId:void 0}),r=(0,n.useRef)(!1);(0,n.useEffect)((function(){var n;e.map&&!r.current&&(null===(n=e.map)||void 0===n||n.loadImage(t.imagePath,(function(r,n){var o;if(r)throw r;return null===(o=e.map)||void 0===o||o.addImage(t.imageId,n),function(){var r;null===(r=e.map)||void 0===r||r.removeImage(t.imageId)}})))}),[e.map,t])};a.defaultProps={mapId:void 0};const i=a;try{a.displayName="useAddImage",a.__docgenInfo={description:"",displayName:"useAddImage",props:{imageId:{defaultValue:null,description:"",name:"imageId",required:!0,type:{name:"string"}},imagePath:{defaultValue:null,description:"",name:"imagePath",required:!0,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/hooks/useAddImage/useAddImage.tsx#useAddImage"]={docgenInfo:a.__docgenInfo,name:"useAddImage",path:"src/hooks/useAddImage/useAddImage.tsx#useAddImage"})}catch(t){}var l=r(64324),c=r(76956),u=r(90574),s=r(67348);function p(t){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},p(t)}function m(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function d(t,e,r){return(e=function(t){var e=function(t,e){if("object"!==p(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!==p(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===p(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function f(){return f=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},f.apply(this,arguments)}const y={title:"hooks/useAddImage",component:i,argTypes:{},decorators:l.Z};var b=function(t){var e=(0,o.Z)({mapId:void 0});return i({imageId:"wgLogo",imagePath:s}),(0,n.useEffect)((function(){var t;null===(t=e.map)||void 0===t||t.flyTo({center:[10.251805123900311,51.11826171422632],zoom:5})}),[e.map]),n.createElement(n.Fragment,null,n.createElement(c.Z,f({layout:{"icon-image":"wgLogo","icon-size":{property:"Mitarbeitende",stops:[[3,.02],[26,.15]]},"icon-anchor":"bottom"}},t)))}.bind({});b.parameters={},b.args={geojson:u,type:"symbol"},b.parameters=function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?m(Object(r),!0).forEach((function(e){d(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):m(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({storySource:{source:"(props: MlGeoJsonLayerProps) => {\n\tconst mapHook = useMap({ mapId: undefined });\n\n\tuseAddImage({\n\t\timageId: 'wgLogo',\n\t\timagePath: wg_marker,\n\t});\n\tuseEffect(() => {\n\t\tmapHook.map?.flyTo({ center: [10.251805123900311, 51.11826171422632], zoom: 5 });\n\t}, [mapHook.map]);\n\n\treturn (\n\t\t<>\n\t\t\t<MlGeoJsonLayer\n\t\t\t\tlayout={{\n\t\t\t\t\t'icon-image': 'wgLogo',\n\t\t\t\t\t'icon-size': {\n\t\t\t\t\t\tproperty: 'Mitarbeitende',\n\t\t\t\t\t\tstops: [\n\t\t\t\t\t\t\t[3, 0.02],\n\t\t\t\t\t\t\t[26, 0.15],\n\t\t\t\t\t\t],\n\t\t\t\t\t} as DataDrivenPropertyValueSpecification<number>,\n\t\t\t\t\t'icon-anchor': 'bottom'\n\t\t\t\t}}\n\t\t\t\t{...props}\n\t\t\t/>\n\t\t</>\n\t);\n}"}},b.parameters);var g=["ExampleConfig"]},44511:(t,e,r)=>{r.r(e),r.d(e,{CSVOrTSV:()=>B,CSVWithOptions:()=>z,CatalogueDemo:()=>W,GPX:()=>N,KML:()=>V,MbTiles:()=>F,OSM:()=>D,TCX:()=>G,Topojson:()=>J,__namedExportsOrder:()=>$,default:()=>H});var n=r(67294),o=r(72642),a=r(85265),i=r(33797),l=r(6912),c=r(99226),u=r(2658),s=r(11970),p=r(84481),m=r(99238),d=r(85393),f=r(78977),y=r(14573),b=r(79825),g=r(31072),v=r(18434),h=r(17781),S=r(13356),w=r(26048),O=r(79485),j=r(82651),x=r(95790),P=r(19399);const E=JSON.parse('[{"item":"mbtiles","description":"In this example, an MBtile file containing the countries of the world is loaded to the map through the useAddProtocol hook. The protocol manager registers the contents of the file as a source. We then add in the layer list a Vector tile layer that uses that source. <br> See source file: <a href=\'https://github.com/mapcomponents/react-map-components-maplibre/blob/main/public/mbtiles/countries.mbtiles\' target=”_blank”> countries.mbtiles </a>"},{"item":"csv","description":"<p>The CSVProtocolHandler enables us to load a layer from a table containing the coordinates of one or more points. The table must have a \'latitude\' and a \'longitude\' column. Column names like \'lat\' or \'long\' are automatically recognized by the hook. Other names, as well as a delimiter other than the comma, can be specified in the options.This encoded options object can be added after a \'?\' sign at the end of the url. <br> The url is expected to have the following Format: <br> See source file: <a href=\'https://github.com/mapcomponents/react-map-components-maplibre/blob/main/public/csv/restaurants.csv\' target=”_blank”> restaurants.csv </a></p> <center> <h4>[protocol]://[filePath]?[encodedOptions]</h6> </center> Example: <i> csv://csv/restaurants.csv </i><br> Example of an options object: <i> csv://csv/gemany_100_postcodes.csv?latfield=Axe-y&lonfield=Axe-x&delimiter=%3A </i><br>  Where the enconded parameters represents the following options object:<br> {<br>latfield: \'Axe-y\', <br>lonfield: \'Axe-x\', <br>delimiter: \':\'<br>} "},{"item":"osm","description":"<p> The OSMProtocolHandler will transform OSM type files into a geojson object and register it as a source. The handler accepts an encoded options object in the source url. <br> See source file: <a href=\'https://github.com/mapcomponents/react-map-components-maplibre/blob/main/public/osm/palma.osm\' target=”_blank”> palma.osm </a> <br> The url is expected to have the following Format: <br> </p> <center> <h4>[protocol]://[filePath]?[encodedOptions</h6> </center> Example: <i> osm://osm/palma.osm?completeFeature=true&allFeatures=false&renderTagged=false&excludeWay=false&suppressWay=false </i> <br> Where the enconded parameters represents the following options object: <br> { <br> completeFeature: true, <br> allFeatures: false,<br> renderTagged: false, <br> excludeWay: false, <br> suppressWay: false <br> }"},{"item":"gpx","description":"<p> GPX files can be processed with the XMLProtocolHandler. This will transform the files into a geojson object and register it as a source. <br> See source file: <a href=\'https://github.com/mapcomponents/react-map-components-maplibre/blob/main/public/gpx/santiago.gpx\' target=”_blank”> santiago.gpx </a> <br> The url is expected to have the following Format: <br> </p> <center> <h4>[protocol]://[filePath]</h6> </center> Example: <i> xml://gpx/santiago.gpx </i>"},{"item":"kml","description":"<p> KML files can be processed with the XMLProtocolHandler. This will transform the files into a geojson object and register it as a source. <br> See source file: <a href=\'https://github.com/mapcomponents/react-map-components-maplibre/blob/main/public/kml/cape_may.kml\' target=”_blank”> cape_may.kml </a> <br> The url is expected to have the following Format: <br> </p> <center> <h4>[protocol]://[filePath]</h6> </center> Example: <i> xml://kml/cape_may.gpx </i>"},{"item":"tcx","description":"<p> TCX files can be processed with the XMLProtocolHandler. This will transform the files into a geojson object and register it as a source. <br> See source file: <a href=\'https://github.com/mapcomponents/react-map-components-maplibre/blob/main/public/tcx/example.tcx\' target=”_blank”> example.tcx </a> <br> The url is expected to have the following Format: <br> </p> <center> <h4>[protocol]://[filePath]</h6> </center> Example: <i> xml://tcx/example.tcx </i>"},{"item":"topojson","description":"<p> In this example, a topojson file is loaded with help of The TopojsonProtocolHandler. The handler transforms the topojson into a geojson object and keep register of the origin topojson object in the features properties of the new geojson. <br> See source file: <a href=\'https://github.com/mapcomponents/react-map-components-maplibre/blob/main/public/topojson/usa.topojson\' target=”_blank”> usa.topojson </a></p> <br> The url is expected to have the following Format: <br>  </p> <center> <h4>[protocol]://[filePath]</h6> </center>  "}]');var I=r(32714),k=r(6546);function L(t){return L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},L(t)}function T(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function C(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?T(Object(r),!0).forEach((function(e){A(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):T(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function A(t,e,r){return(e=function(t){var e=function(t,e){if("object"!==L(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!==L(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===L(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Z(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,a,i,l=[],c=!0,u=!1;try{if(a=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(l.push(n.value),l.length!==e);c=!0);}catch(t){u=!0,o=t}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return l}}(t,e)||M(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function M(t,e){if(t){if("string"==typeof t)return _(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_(t,e):void 0}}function _(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}const H={title:"hooks/useAddProtocol",component:y.Z,argTypes:{},decorators:b.Z};var R=function(){var t=(0,n.useContext)(w.Z);return(0,n.useEffect)((function(){t.updateStyle(x.Z)}),[]),n.createElement("div",{style:{display:"none"}},n.createElement(O.Z,null,n.createElement(j.Z,{layers:t.layers,setLayers:t.setLayers,insertBeforeLayer:"useAddProtocolLayer",fitBoundsOptions:{padding:{top:50,bottom:50,left:25,right:25}}})))},F=function(){var t=(0,g.Z)({mapId:void 0});return(0,y.Z)({protocol:"mbtiles",handler:s.GV}),(0,n.useEffect)((function(){var e;t.map&&(null===(e=t.map)||void 0===e||e.setZoom(0))}),[t.map]),n.createElement(n.Fragment,null,n.createElement(I.Z,{mapId:"map_1",url:"mbtiles://mbtiles/countries.mbtiles/{z}/{x}/{y}",layers:[{id:"countries",type:"fill","source-layer":"countries",layout:{},paint:{"fill-color":"#f9a5f5","fill-opacity":.5}}],insertBeforeLayer:"waterway-name",sourceOptions:{type:"vector",minzoom:0,maxzoom:1}}),n.createElement(R,null))}.bind({});F.parameters={name:"MBTiles"},F.args={};var B=function(){var t=(0,g.Z)({mapId:void 0});return(0,y.Z)({protocol:"csv",handler:p.o}),(0,n.useEffect)((function(){var e,r,n;null!==(e=t.map)&&void 0!==e&&e.getSource("csv-source")||null===(n=t.map)||void 0===n||n.addSource("csv-source",{type:"geojson",data:"csv://csv/restaurants.csv"}),null===(r=t.map)||void 0===r||r.jumpTo({center:[-74.914516,38.935759],zoom:13})}),[t.map]),n.createElement(n.Fragment,null,n.createElement(k.Z,{layerId:"UseAddProtocolLayer",options:{type:"circle",source:"csv-source",paint:{"circle-color":"#009EE0","circle-stroke-color":"#F0f0f0","circle-stroke-width":2,"circle-radius":18}},insertBeforeLayer:"waterway-name"}),n.createElement(R,null))}.bind({});B.parameters={},B.args={};var z=function(){var t=(0,g.Z)({mapId:void 0});return(0,y.Z)({protocol:"csv",handler:p.o}),(0,n.useEffect)((function(){var e,r,n;null!==(e=t.map)&&void 0!==e&&e.getSource("csv-source")||(null===(n=t.map)||void 0===n||n.addSource("csv-source",{type:"geojson",data:"csv://csv/gemany_100_postcodes.csv".concat("?latfield=Axe-y&lonfield=Axe-x&delimiter=:")}));null===(r=t.map)||void 0===r||r.jumpTo({center:[10.147049,50.871231],zoom:6,speed:2})}),[t.map]),n.createElement(n.Fragment,null,n.createElement(k.Z,{layerId:"UseAddProtocolLayer",options:{type:"circle",source:"csv-source",paint:{"circle-color":"#009EE0","circle-stroke-color":"#F0f0f0","circle-stroke-width":2,"circle-radius":18}},insertBeforeLayer:"waterway-name"}),n.createElement(R,null))}.bind({});z.parameters={},z.args={};var D=function(){var t=(0,g.Z)({mapId:void 0});return(0,y.Z)({protocol:"osm",handler:d.Y}),(0,n.useEffect)((function(){var e,r,n;null!==(e=t.map)&&void 0!==e&&e.getSource("osm-source")||(null===(n=t.map)||void 0===n||n.addSource("osm-source",{type:"geojson",data:"osm://osm/palma.osm".concat("?completeFeature=true&allFeatures=false&renderTagged=false&excludeWay=false&suppressWay=false")}));null===(r=t.map)||void 0===r||r.jumpTo({center:[2.651811,39.571309],zoom:16.5})}),[t.map]),n.createElement(n.Fragment,null,n.createElement(k.Z,{layerId:"UseAddProtocolLayer",options:{type:"circle",source:"osm-source",paint:{"circle-color":"#9a00ff","circle-stroke-color":"#fefefe","circle-stroke-width":2,"circle-radius":4}},insertBeforeLayer:"waterway-name"}),n.createElement(R,null))}.bind({});D.parameters={},D.args={};var N=function(){var t=(0,g.Z)({mapId:void 0});return(0,y.Z)({protocol:"gpx",handler:f.B}),(0,n.useEffect)((function(){var e,r,n;null!==(e=t.map)&&void 0!==e&&e.getSource("gpx-source")||null===(n=t.map)||void 0===n||n.addSource("gpx-source",{type:"geojson",data:"gpx://gpx/santiago.gpx"}),null===(r=t.map)||void 0===r||r.jumpTo({center:[-5.100251,42.887371],zoom:7})}),[t.map]),n.createElement(n.Fragment,null,n.createElement(k.Z,{layerId:"UseAddProtocolLayer",options:{type:"circle",source:"gpx-source",paint:{"circle-color":"#45ff33","circle-stroke-color":"#259913","circle-stroke-width":1,"circle-radius":2}},insertBeforeLayer:"waterway-name"}),n.createElement(R,null))}.bind({});N.parameters={},N.args={};var V=function(){var t=(0,g.Z)({mapId:void 0});return(0,y.Z)({protocol:"kml",handler:f.B}),(0,n.useEffect)((function(){var e,r,n;null!==(e=t.map)&&void 0!==e&&e.getSource("kml-source")||null===(n=t.map)||void 0===n||n.addSource("kml-source",{type:"geojson",data:"kml://kml/cape_may.kml"}),null===(r=t.map)||void 0===r||r.jumpTo({center:[-74.82832,39.093526],zoom:9})}),[t.map]),n.createElement(n.Fragment,null,n.createElement(k.Z,{layerId:"UseAddProtocolLayer",options:{type:"circle",source:"kml-source",paint:{"circle-color":"#ff4533","circle-stroke-color":"#992513","circle-stroke-width":1,"circle-radius":2}},insertBeforeLayer:"waterway-name"}),n.createElement(R,null))}.bind({});V.parameters={},V.args={protocol:"kml",handler:f.B,sourceId:"fromKML-Source",filePath:"kml/cape_may.kml",flyTo:{center:[-74.82832,39.093526],zoom:9,speed:2}};var G=function(){var t=(0,g.Z)({mapId:void 0});return(0,y.Z)({protocol:"tcx",handler:f.B}),(0,n.useEffect)((function(){var e,r,n;null!==(e=t.map)&&void 0!==e&&e.getSource("kml-source")||null===(n=t.map)||void 0===n||n.addSource("tcx-source",{type:"geojson",data:"tcx://tcx/example.tcx"}),null===(r=t.map)||void 0===r||r.jumpTo({center:[32.711545,34.844962],zoom:9})}),[t.map]),n.createElement(n.Fragment,null,n.createElement(k.Z,{layerId:"UseAddProtocolLayer",options:{type:"circle",source:"tcx-source",paint:{"circle-color":"#ff45fa","circle-stroke-color":"#992578","circle-stroke-width":1,"circle-radius":2}},insertBeforeLayer:"waterway-name"}),n.createElement(R,null))}.bind({});G.parameters={},G.args={};var J=function(){var t=(0,g.Z)({mapId:void 0});return(0,y.Z)({protocol:"topojson",handler:m.F}),(0,n.useEffect)((function(){var e,r,n;null!==(e=t.map)&&void 0!==e&&e.getSource("topojson-source")||null===(n=t.map)||void 0===n||n.addSource("topojson-source",{type:"geojson",data:"topojson://topojson/usa.topojson"}),null===(r=t.map)||void 0===r||r.jumpTo({center:[-99.110122,39.827183],zoom:4})}),[t.map]),n.createElement(n.Fragment,null,n.createElement(k.Z,{layerId:"UseAddProtocolLayer",options:{type:"line",source:"topojson-source",paint:{"line-color":["match",["get","fromObject"],"land","#111111","states","#009EE0","counties","#747577","white"],"line-width":["match",["get","fromObject"],"land",3,"states",2,"counties",1,1]}},insertBeforeLayer:"waterway-name"}),n.createElement(R,null))}.bind({});J.parameters={},J.args={};var U={mbtiles:{protocol:"mbtiles",handler:s.GV,sourceID:"fromMBTile-source",filePath:"mbtiles/countries.mbtiles",type:"fill",layers:[{id:"countries",type:"fill","source-layer":"countries",layout:{},paint:{"fill-color":"#f9a5f5","fill-opacity":.5}}],insertBeforeLayer:"waterway-name",sourceOptions:{type:"vector",minzoom:0,maxzoom:1},flyTo:{center:[10.147049,50.871231],zoom:2,speed:2}},csv:{protocol:"csv",handler:p.o,sourceId:"fromCSV-Source",filePath:"csv/restaurants.csv",type:"circle",paint:{"circle-color":"#009EE0","circle-stroke-color":"#F0f0f0","circle-stroke-width":2,"circle-radius":18},flyTo:{center:[-74.914516,38.935759],zoom:13,speed:2}},csvWithOptions:{protocol:"csv",handler:p.o,sourceId:"fromCSV-options-Source",filePath:"csv/gemany_100_postcodes.csv",options:{latfield:"Axe-y",lonfield:"Axe-x",delimiter:":"},type:"circle",paint:{"circle-color":"#009EE0","circle-radius":10},flyTo:{center:[10.147049,50.871231],zoom:6,speed:2}},osm:{protocol:"osm",handler:d.Y,sourceId:"fromOSM-Source",filePath:"osm/palma.osm",options:{completeFeature:!0,allFeatures:!1,renderTagged:!1,excludeWay:!1,suppressWay:!1},flyTo:{center:[2.651811,39.571309],zoom:15.5,speed:4}},gpx:{protocol:"gpx",handler:f.B,sourceId:"fromGPX-Source",filePath:"gpx/santiago.gpx",flyTo:{center:[-5.100251,42.887371],zoom:7,speed:3}},kml:{protocol:"kml",handler:f.B,sourceId:"fromKML-Source",filePath:"kml/cape_may.kml",flyTo:{center:[-74.82832,39.093526],zoom:9,speed:2}},tcx:{protocol:"tcx",handler:f.B,sourceId:"fromTCX-Source",filePath:"tcx/example.tcx",flyTo:{center:[32.711545,34.844962],zoom:9,speed:3}},topojson:{protocol:"topojson",handler:m.F,sourceId:"fromTopoJson-Source",filePath:"topojson/usa.topojson",paint:{"line-color":["match",["get","fromObject"],"land","#111111","states","#009EE0","counties","#747577","white"],"line-width":["match",["get","fromObject"],"land",3,"states",2,"counties",1,1]},flyTo:{center:[-99.110122,39.827183],zoom:4,speed:2}}},W=function(){var t=(0,g.Z)({mapId:void 0}),e=Z((0,n.useState)(!0),2),r=e[0],s=e[1],p=(0,n.useContext)(w.Z),m=Z((0,n.useState)("csv"),2),d=m[0],f=m[1],b=Z(n.useState(null),2),I=b[0],k=b[1],L=Boolean(I),T=U[d],C="?"+new URLSearchParams(T.options).toString();return(0,y.Z)({protocol:T.protocol,handler:T.handler}),(0,n.useEffect)((function(){p.updateStyle(x.Z),p.setLayers(["mbtiles"===T.protocol?{type:"vt",name:"useAddProtocolLayer",config:{layerId:"useAddProtocolLayer",url:T.protocol+"://"+T.filePath+"/{z}/{x}/{y}",layers:T.layers,insertBeforeLayer:T.insertBeforeLayer,sourceOptions:T.sourceOptions}}:{type:"geojson",name:"useAddProtocolLayer",config:{layerId:"useAddProtocolLayer",type:T.type||"line",options:{source:T.sourceId},paint:T.paint}}])}),[d]),(0,n.useEffect)((function(){var e,r,n;null!==(e=t.map)&&void 0!==e&&e.getSource(T.sourceId)||"mbtiles"===T.protocol||null===(r=t.map)||void 0===r||r.addSource(T.sourceId,{type:"geojson",data:T.protocol+"://"+T.filePath+C}),T.flyTo&&(null===(n=t.map)||void 0===n||n.flyTo(T.flyTo))}),[t.map,d]),n.createElement(n.Fragment,null,n.createElement(v.Z,{buttons:n.createElement(n.Fragment,null,n.createElement(o.Z,{variant:r?"contained":"outlined",onClick:function(){return s(!r)},sx:{marginRight:{xs:"0px",sm:"10px"}}},"Sidebar"),n.createElement(o.Z,{id:"basic-button",variant:"contained","aria-controls":L?"basic-menu":void 0,"aria-haspopup":"true","aria-expanded":L?"true":void 0,onClick:function(t){k(t.currentTarget)}},"Example Configs"),n.createElement(a.Z,{id:"basic-menu",anchorEl:I,open:L,onClose:function(){return k(null)},MenuListProps:{"aria-labelledby":"basic-button"}},Object.keys(U).map((function(t){return n.createElement(i.Z,{onClick:function(){return f(t)},key:t,selected:t===d},t)}))))}),n.createElement(h.Z,{open:r,setOpen:s,name:T.protocol.toUpperCase()+" demo"},n.createElement(l.Z,{title:"add a new"+T.protocol+" to the map"},n.createElement(S.Z,{onComplete:function(t){return p.setLayers((function(e){return[].concat(function(t){if(Array.isArray(t))return _(t)}(r=e)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(r)||M(r)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),[t]);var r}))},layerTypes:[T.protocol]})),n.createElement(c.Z,{sx:{height:"35%"}},n.createElement(u.Z,{variant:"h6"},"Layers"),n.createElement(O.Z,null,n.createElement(j.Z,{layers:p.layers,setLayers:p.setLayers,insertBeforeLayer:"useAddProtocolLayer",fitBoundsOptions:{padding:{top:50,bottom:50,left:25,right:25}}}))),n.createElement(P.Z,{json:E,section:T.protocol,title:"About this demo: "})))}.bind({});F.parameters=C({storySource:{source:"() => {\n\tconst mapHook = useMap({ mapId: undefined });\n\n\tuseAddProtocol({\n\t\tprotocol: 'mbtiles',\n\t\thandler: mbTilesProtocolHandler,\n\t});\n\n\tuseEffect(() => {\n\t\tif (!mapHook.map) return;\n\n\t\tmapHook.map?.setZoom(0);\n\t}, [mapHook.map]);\n\n\treturn (\n\t\t<>\n\t\t\t<MlVectorTileLayer\n\t\t\t\tmapId={'map_1'}\n\t\t\t\turl={'mbtiles://mbtiles/countries.mbtiles/{z}/{x}/{y}'}\n\t\t\t\tlayers={\n\t\t\t\t\t[\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tid: 'countries',\n\t\t\t\t\t\t\ttype: 'fill',\n\t\t\t\t\t\t\t'source-layer': 'countries',\n\t\t\t\t\t\t\tlayout: {},\n\t\t\t\t\t\t\tpaint: { 'fill-color': '#f9a5f5', 'fill-opacity': 0.5 },\n\t\t\t\t\t\t},\n\t\t\t\t\t] as unknown as LayerSpecification[]\n\t\t\t\t}\n\t\t\t\tinsertBeforeLayer={'waterway-name'}\n\t\t\t\tsourceOptions={{\n\t\t\t\t\ttype: 'vector',\n\t\t\t\t\tminzoom: 0,\n\t\t\t\t\tmaxzoom: 1,\n\t\t\t\t}}\n\t\t\t/>\n\n\t\t\t<BackgroundLayers />\n\t\t</>\n\t);\n}"}},F.parameters),B.parameters=C({storySource:{source:"() => {\n\tconst mapHook = useMap({ mapId: undefined });\n\n\t//  An optional encoded options object can be added after a '?' sign at the end of the url.\n\t//  Handlers that support options are:\n\t// -CSV/TSV Handler Options: https://github.com/mapbox/csv2geojson/blob/gh-pages/README.md\n\n\tuseAddProtocol({\n\t\tprotocol: 'csv',\n\t\thandler: CSVProtocolHandler,\n\t});\n\n\tuseEffect(() => {\n\t\tif (!mapHook.map?.getSource('csv-source')) {\n\t\t\tmapHook.map?.addSource('csv-source', {\n\t\t\t\ttype: 'geojson',\n\t\t\t\tdata: `csv://csv/restaurants.csv`,\n\t\t\t});\n\t\t}\n\t\tmapHook.map?.jumpTo({ center: [-74.914516, 38.935759], zoom: 13 } as JumpToOptions);\n\t}, [mapHook.map]);\n\n\treturn (\n\t\t<>\n\t\t\t<MlLayer\n\t\t\t\tlayerId={'UseAddProtocolLayer'}\n\t\t\t\toptions={\n\t\t\t\t\t{\n\t\t\t\t\t\ttype: 'circle',\n\t\t\t\t\t\tsource: 'csv-source',\n\t\t\t\t\t\tpaint: {\n\t\t\t\t\t\t\t'circle-color': '#009EE0',\n\t\t\t\t\t\t\t'circle-stroke-color': '#F0f0f0',\n\t\t\t\t\t\t\t'circle-stroke-width': 2,\n\t\t\t\t\t\t\t'circle-radius': 18,\n\t\t\t\t\t\t},\n\t\t\t\t\t} as useLayerProps['options']\n\t\t\t\t}\n\t\t\t\tinsertBeforeLayer={'waterway-name'}\n\t\t\t/>\n\n\t\t\t<BackgroundLayers />\n\t\t</>\n\t);\n}"}},B.parameters),z.parameters=C({storySource:{source:"() => {\n\tconst mapHook = useMap({ mapId: undefined });\n\n\t//  An optional encoded options object can be added after a '?' sign at the end of the url.\n\t//  Handlers that support options are:\n\t// -CSV/TSV Handler Options: https://github.com/mapbox/csv2geojson/blob/gh-pages/README.md\n\n\tuseAddProtocol({\n\t\tprotocol: 'csv',\n\t\thandler: CSVProtocolHandler,\n\t});\n\n\tuseEffect(() => {\n\t\tif (!mapHook.map?.getSource('csv-source')) {\n\t\t\tconst options = '?latfield=Axe-y&lonfield=Axe-x&delimiter=:';\n\n\t\t\tmapHook.map?.addSource('csv-source', {\n\t\t\t\ttype: 'geojson',\n\t\t\t\tdata: `csv://csv/gemany_100_postcodes.csv${options}`,\n\t\t\t});\n\t\t}\n\t\tmapHook.map?.jumpTo({ center: [10.147049, 50.871231], zoom: 6, speed: 2 } as JumpToOptions);\n\t}, [mapHook.map]);\n\n\treturn (\n\t\t<>\n\t\t\t<MlLayer\n\t\t\t\tlayerId={'UseAddProtocolLayer'}\n\t\t\t\toptions={\n\t\t\t\t\t{\n\t\t\t\t\t\ttype: 'circle',\n\t\t\t\t\t\tsource: 'csv-source',\n\t\t\t\t\t\tpaint: {\n\t\t\t\t\t\t\t'circle-color': '#009EE0',\n\t\t\t\t\t\t\t'circle-stroke-color': '#F0f0f0',\n\t\t\t\t\t\t\t'circle-stroke-width': 2,\n\t\t\t\t\t\t\t'circle-radius': 18,\n\t\t\t\t\t\t},\n\t\t\t\t\t} as useLayerProps['options']\n\t\t\t\t}\n\t\t\t\tinsertBeforeLayer={'waterway-name'}\n\t\t\t/>\n\n\t\t\t<BackgroundLayers />\n\t\t</>\n\t);\n}"}},z.parameters),D.parameters=C({storySource:{source:"() => {\n\tconst mapHook = useMap({ mapId: undefined });\n\n\t//  An optional encoded options object can be added after a '?' sign at the end of the url.\n\t//  Handlers that support options are:\n\t// -OSM Handler Options: https://github.com/tibetty/osm2geojson-lite#osm2geojsonosm-opts\n\n\tuseAddProtocol({\n\t\tprotocol: 'osm',\n\t\thandler: OSMProtocolHandler,\n\t});\n\n\tuseEffect(() => {\n\t\tif (!mapHook.map?.getSource('osm-source')) {\n\t\t\tconst options =\n\t\t\t\t'?completeFeature=true&allFeatures=false&renderTagged=false&excludeWay=false&suppressWay=false';\n\n\t\t\tmapHook.map?.addSource('osm-source', {\n\t\t\t\ttype: 'geojson',\n\t\t\t\tdata: `osm://osm/palma.osm${options}`,\n\t\t\t});\n\t\t}\n\t\tmapHook.map?.jumpTo({ center: [2.651811, 39.571309], zoom: 16.5 } as JumpToOptions);\n\t}, [mapHook.map]);\n\n\treturn (\n\t\t<>\n\t\t\t<MlLayer\n\t\t\t\tlayerId={'UseAddProtocolLayer'}\n\t\t\t\toptions={\n\t\t\t\t\t{\n\t\t\t\t\t\ttype: 'circle',\n\t\t\t\t\t\tsource: 'osm-source',\n\t\t\t\t\t\tpaint: {\n\t\t\t\t\t\t\t'circle-color': '#9a00ff',\n\t\t\t\t\t\t\t'circle-stroke-color': '#fefefe',\n\t\t\t\t\t\t\t'circle-stroke-width': 2,\n\t\t\t\t\t\t\t'circle-radius': 4,\n\t\t\t\t\t\t},\n\t\t\t\t\t} as useLayerProps['options']\n\t\t\t\t}\n\t\t\t\tinsertBeforeLayer={'waterway-name'}\n\t\t\t/>\n\n\t\t\t<BackgroundLayers />\n\t\t</>\n\t);\n}"}},D.parameters),N.parameters=C({storySource:{source:"() => {\n\tconst mapHook = useMap({ mapId: undefined });\n\n\tuseAddProtocol({\n\t\tprotocol: 'gpx',\n\t\thandler: XMLProtocolHandler,\n\t});\n\n\tuseEffect(() => {\n\t\tif (!mapHook.map?.getSource('gpx-source')) {\n\t\t\tmapHook.map?.addSource('gpx-source', {\n\t\t\t\ttype: 'geojson',\n\t\t\t\tdata: `gpx://gpx/santiago.gpx`,\n\t\t\t});\n\t\t}\n\t\tmapHook.map?.jumpTo({ center: [-5.100251, 42.887371], zoom: 7 } as JumpToOptions);\n\t}, [mapHook.map]);\n\n\treturn (\n\t\t<>\n\t\t\t<MlLayer\n\t\t\t\tlayerId={'UseAddProtocolLayer'}\n\t\t\t\toptions={\n\t\t\t\t\t{\n\t\t\t\t\t\ttype: 'circle',\n\t\t\t\t\t\tsource: 'gpx-source',\n\t\t\t\t\t\tpaint: {\n\t\t\t\t\t\t\t'circle-color': '#45ff33',\n\t\t\t\t\t\t\t'circle-stroke-color': '#259913',\n\t\t\t\t\t\t\t'circle-stroke-width': 1,\n\t\t\t\t\t\t\t'circle-radius': 2,\n\t\t\t\t\t\t},\n\t\t\t\t\t} as useLayerProps['options']\n\t\t\t\t}\n\t\t\t\tinsertBeforeLayer={'waterway-name'}\n\t\t\t/>\n\n\t\t\t<BackgroundLayers />\n\t\t</>\n\t);\n}"}},N.parameters),V.parameters=C({storySource:{source:"() => {\n\tconst mapHook = useMap({ mapId: undefined });\n\n\tuseAddProtocol({\n\t\tprotocol: 'kml',\n\t\thandler: XMLProtocolHandler,\n\t});\n\n\tuseEffect(() => {\n\t\tif (!mapHook.map?.getSource('kml-source')) {\n\t\t\tmapHook.map?.addSource('kml-source', {\n\t\t\t\ttype: 'geojson',\n\t\t\t\tdata: `kml://kml/cape_may.kml`,\n\t\t\t});\n\t\t}\n\t\tmapHook.map?.jumpTo({ center: [-74.82832, 39.093526], zoom: 9 } as JumpToOptions);\n\t}, [mapHook.map]);\n\n\treturn (\n\t\t<>\n\t\t\t<MlLayer\n\t\t\t\tlayerId={'UseAddProtocolLayer'}\n\t\t\t\toptions={\n\t\t\t\t\t{\n\t\t\t\t\t\ttype: 'circle',\n\t\t\t\t\t\tsource: 'kml-source',\n\t\t\t\t\t\tpaint: {\n\t\t\t\t\t\t\t'circle-color': '#ff4533',\n\t\t\t\t\t\t\t'circle-stroke-color': '#992513',\n\t\t\t\t\t\t\t'circle-stroke-width': 1,\n\t\t\t\t\t\t\t'circle-radius': 2,\n\t\t\t\t\t\t},\n\t\t\t\t\t} as useLayerProps['options']\n\t\t\t\t}\n\t\t\t\tinsertBeforeLayer={'waterway-name'}\n\t\t\t/>\n\n\t\t\t<BackgroundLayers />\n\t\t</>\n\t);\n}"}},V.parameters),G.parameters=C({storySource:{source:"() => {\n\tconst mapHook = useMap({ mapId: undefined });\n\n\tuseAddProtocol({\n\t\tprotocol: 'tcx',\n\t\thandler: XMLProtocolHandler,\n\t});\n\n\tuseEffect(() => {\n\t\tif (!mapHook.map?.getSource('kml-source')) {\n\t\t\tmapHook.map?.addSource('tcx-source', {\n\t\t\t\ttype: 'geojson',\n\t\t\t\tdata: `tcx://tcx/example.tcx`,\n\t\t\t});\n\t\t}\n\t\tmapHook.map?.jumpTo({ center: [32.711545, 34.844962], zoom: 9 } as JumpToOptions);\n\t}, [mapHook.map]);\n\n\treturn (\n\t\t<>\n\t\t\t<MlLayer\n\t\t\t\tlayerId={'UseAddProtocolLayer'}\n\t\t\t\toptions={\n\t\t\t\t\t{\n\t\t\t\t\t\ttype: 'circle',\n\t\t\t\t\t\tsource: 'tcx-source',\n\t\t\t\t\t\tpaint: {\n\t\t\t\t\t\t\t'circle-color': '#ff45fa',\n\t\t\t\t\t\t\t'circle-stroke-color': '#992578',\n\t\t\t\t\t\t\t'circle-stroke-width': 1,\n\t\t\t\t\t\t\t'circle-radius': 2,\n\t\t\t\t\t\t},\n\t\t\t\t\t} as useLayerProps['options']\n\t\t\t\t}\n\t\t\t\tinsertBeforeLayer={'waterway-name'}\n\t\t\t/>\n\n\t\t\t<BackgroundLayers />\n\t\t</>\n\t);\n}"}},G.parameters),J.parameters=C({storySource:{source:"() => {\n\tconst mapHook = useMap({ mapId: undefined });\n\n\tuseAddProtocol({\n\t\tprotocol: 'topojson',\n\t\thandler: TopojsonProtocolHandler,\n\t});\n\n\tuseEffect(() => {\n\t\tif (!mapHook.map?.getSource('topojson-source')) {\n\t\t\tmapHook.map?.addSource('topojson-source', {\n\t\t\t\ttype: 'geojson',\n\t\t\t\tdata: `topojson://topojson/usa.topojson`,\n\t\t\t});\n\t\t}\n\t\tmapHook.map?.jumpTo({ center: [-99.110122, 39.827183], zoom: 4 } as JumpToOptions);\n\t}, [mapHook.map]);\n\n\treturn (\n\t\t<>\n\t\t\t<MlLayer\n\t\t\t\tlayerId={'UseAddProtocolLayer'}\n\t\t\t\toptions={\n\t\t\t\t\t{\n\t\t\t\t\t\ttype: 'line',\n\t\t\t\t\t\tsource: 'topojson-source',\n\t\t\t\t\t\tpaint: {\n\t\t\t\t\t\t\t'line-color': [\n\t\t\t\t\t\t\t\t'match',\n\t\t\t\t\t\t\t\t['get', 'fromObject'],\n\t\t\t\t\t\t\t\t'land',\n\t\t\t\t\t\t\t\t'#111111',\n\t\t\t\t\t\t\t\t'states',\n\t\t\t\t\t\t\t\t'#009EE0',\n\t\t\t\t\t\t\t\t'counties',\n\t\t\t\t\t\t\t\t'#747577',\n\t\t\t\t\t\t\t\t'white', // otherwise\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t'line-width': [\n\t\t\t\t\t\t\t\t'match',\n\t\t\t\t\t\t\t\t['get', 'fromObject'],\n\t\t\t\t\t\t\t\t'land',\n\t\t\t\t\t\t\t\t3,\n\t\t\t\t\t\t\t\t'states',\n\t\t\t\t\t\t\t\t2,\n\t\t\t\t\t\t\t\t'counties',\n\t\t\t\t\t\t\t\t1,\n\t\t\t\t\t\t\t\t1, // otherwise\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t},\n\t\t\t\t\t} as useLayerProps['options']\n\t\t\t\t}\n\t\t\t\tinsertBeforeLayer={'waterway-name'}\n\t\t\t/>\n\n\t\t\t<BackgroundLayers />\n\t\t</>\n\t);\n}"}},J.parameters),W.parameters=C({storySource:{source:"() => {\n\tconst mapHook = useMap({ mapId: undefined });\n\n\tconst [openSidebar, setOpenSidebar] = useState(true);\n\tconst layerContext = useContext(LayerContext);\n\tconst [currentDemo, setCurrentDemo] = useState<string>('csv');\n\tconst [anchorEl, setAnchorEl] = React.useState<null | HTMLElement>(null);\n\tconst open = Boolean(anchorEl);\n\tconst props: TemplateProps = currentProps[currentDemo];\n\n\tconst optionsURL = '?' + new URLSearchParams(props.options as string).toString();\n\n\tuseAddProtocol({\n\t\tprotocol: props.protocol,\n\t\thandler: props.handler,\n\t});\n\n\tuseEffect(() => {\n\t\tlayerContext.updateStyle(bright as StyleSpecification);\n\n\t\tlayerContext.setLayers([\n\t\t\tprops.protocol === 'mbtiles'\n\t\t\t\t? {\n\t\t\t\t\t\ttype: 'vt',\n\t\t\t\t\t\tname: 'useAddProtocolLayer',\n\t\t\t\t\t\tconfig: {\n\t\t\t\t\t\t\tlayerId: 'useAddProtocolLayer',\n\t\t\t\t\t\t\turl: props.protocol + '://' + props.filePath + '/{z}/{x}/{y}',\n\t\t\t\t\t\t\tlayers: props.layers,\n\t\t\t\t\t\t\tinsertBeforeLayer: props.insertBeforeLayer,\n\t\t\t\t\t\t\tsourceOptions: props.sourceOptions,\n\t\t\t\t\t\t} as MlVectorTileLayerProps,\n\t\t\t\t  }\n\t\t\t\t: {\n\t\t\t\t\t\ttype: 'geojson',\n\t\t\t\t\t\tname: 'useAddProtocolLayer',\n\t\t\t\t\t\tconfig: {\n\t\t\t\t\t\t\tlayerId: 'useAddProtocolLayer',\n\t\t\t\t\t\t\ttype: props.type || 'line',\n\t\t\t\t\t\t\toptions: {\n\t\t\t\t\t\t\t\tsource: props.sourceId,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tpaint: props.paint,\n\t\t\t\t\t\t} as MlGeoJsonLayerProps,\n\t\t\t\t  },\n\t\t]);\n\t}, [currentDemo]);\n\n\tuseEffect(() => {\n\t\tif (!mapHook.map?.getSource(props.sourceId) && props.protocol !== 'mbtiles') {\n\t\t\tmapHook.map?.addSource(props.sourceId, {\n\t\t\t\ttype: 'geojson',\n\t\t\t\tdata: props.protocol + '://' + props.filePath + optionsURL,\n\t\t\t});\n\t\t}\n\n\t\tif (props.flyTo) {\n\t\t\tmapHook.map?.flyTo(props.flyTo as FlyToOptions);\n\t\t}\n\t}, [mapHook.map, currentDemo]);\n\n\treturn (\n\t\t<>\n\t\t\t<TopToolbar\n\t\t\t\tbuttons={\n\t\t\t\t\t<>\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tvariant={openSidebar ? 'contained' : 'outlined'}\n\t\t\t\t\t\t\tonClick={() => setOpenSidebar(!openSidebar)}\n\t\t\t\t\t\t\tsx={{ marginRight: { xs: '0px', sm: '10px' } }}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tSidebar\n\t\t\t\t\t\t</Button>\n\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tid=\"basic-button\"\n\t\t\t\t\t\t\tvariant=\"contained\"\n\t\t\t\t\t\t\taria-controls={open ? 'basic-menu' : undefined}\n\t\t\t\t\t\t\taria-haspopup=\"true\"\n\t\t\t\t\t\t\taria-expanded={open ? 'true' : undefined}\n\t\t\t\t\t\t\tonClick={(event: React.MouseEvent<HTMLButtonElement>) => {\n\t\t\t\t\t\t\t\tsetAnchorEl(event.currentTarget);\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tExample Configs\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t<Menu\n\t\t\t\t\t\t\tid=\"basic-menu\"\n\t\t\t\t\t\t\tanchorEl={anchorEl}\n\t\t\t\t\t\t\topen={open}\n\t\t\t\t\t\t\tonClose={() => setAnchorEl(null)}\n\t\t\t\t\t\t\tMenuListProps={{\n\t\t\t\t\t\t\t\t'aria-labelledby': 'basic-button',\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{Object.keys(currentProps).map((el) => (\n\t\t\t\t\t\t\t\t<MenuItem onClick={() => setCurrentDemo(el)} key={el} selected={el === currentDemo}>\n\t\t\t\t\t\t\t\t\t{el}\n\t\t\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t</Menu>\n\t\t\t\t\t</>\n\t\t\t\t}\n\t\t\t/>\n\n\t\t\t<Sidebar\n\t\t\t\topen={openSidebar}\n\t\t\t\tsetOpen={setOpenSidebar}\n\t\t\t\tname={props.protocol.toUpperCase() + ' demo'}\n\t\t\t>\n\t\t\t\t<Tooltip title={'add a new' + props.protocol + ' to the map'}>\n\t\t\t\t\t<AddLayerButton\n\t\t\t\t\t\tonComplete={(config) => layerContext.setLayers((current) => [...current, config])}\n\t\t\t\t\t\tlayerTypes={[props.protocol]}\n\t\t\t\t\t/>\n\t\t\t\t</Tooltip>\n\n\t\t\t\t<Box sx={{ height: '35%' }}>\n\t\t\t\t\t<Typography variant=\"h6\">{'Layers'}</Typography>\n\t\t\t\t\t<LayerList>\n\t\t\t\t\t\t<LayerListItemFactory\n\t\t\t\t\t\t\tlayers={layerContext.layers}\n\t\t\t\t\t\t\tsetLayers={layerContext.setLayers}\n\t\t\t\t\t\t\tinsertBeforeLayer=\"useAddProtocolLayer\"\n\t\t\t\t\t\t\tfitBoundsOptions={{ padding: { top: 50, bottom: 50, left: 25, right: 25 } }}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</LayerList>\n\t\t\t\t</Box>\n\n\t\t\t\t<DemoDescriptions\n\t\t\t\t\tjson={protocolDescriptions}\n\t\t\t\t\tsection={props.protocol}\n\t\t\t\t\ttitle={'About this demo: '}\n\t\t\t\t/>\n\t\t\t</Sidebar>\n\t\t</>\n\t);\n}"}},W.parameters);var $=["MbTiles","CSVOrTSV","CSVWithOptions","OSM","GPX","KML","TCX","Topojson","CatalogueDemo"]},1933:(t,e,r)=>{r.r(e),r.d(e,{ExampleConfig:()=>O,__namedExportsOrder:()=>j,default:()=>h});var n=r(67294),o=r(46846),a=r(18434),i=r(54553),l=r(72642),c=r(33797),u=r(2658),s=r(60195),p=r(76956),m=r(17781);function d(t){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},d(t)}function f(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function y(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?f(Object(r),!0).forEach((function(e){b(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function b(t,e,r){return(e=function(t){var e=function(t,e){if("object"!==d(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!==d(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===d(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function g(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,a,i,l=[],c=!0,u=!1;try{if(a=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(l.push(n.value),l.length!==e);c=!0);}catch(t){u=!0,o=t}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return l}}(t,e)||function(t,e){if(t){if("string"==typeof t)return v(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?v(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}const h={title:"Hooks/useCameraFollowPath",component:o.Z,argTypes:{},decorators:i.Z};var S={type:"Feature",properties:{},geometry:{type:"LineString",coordinates:[[7.10942788610961,50.708209240168],[7.10966149846967,50.7088867160122],[7.10910082880551,50.7108256986007],[7.10856352037736,50.7126945974813],[7.1083532692533,50.7142598002937],[7.10814301812924,50.7160118929942],[7.10793276700518,50.7169463424345],[7.10776923835314,50.7176004570426],[7.10713848498096,50.718838602551],[7.10699831756492,50.7199599418793],[7.106900786313568,50.72118132611057]]}},w=[{value:15,label:"15"},{value:16,label:"16"},{value:17,label:"17"},{value:18,label:"18"},{value:19,label:"19"},{value:20,label:"20"}],O=function(){var t=g((0,n.useState)({pause:!0,zoom:18,speed:1,pitch:60}),2),e=t[0],r=t[1],i=(0,o.Z)({route:S,pause:e.pause,pitch:e.pitch,zoom:e.zoom,speed:e.speed}),d=g((0,n.useState)(!0),2),f=d[0],b=d[1],v=g((0,n.useState)(!0),2),h=v[0],O=v[1];return n.createElement(n.Fragment,null,n.createElement(a.Z,{buttons:n.createElement(l.Z,{variant:h?"contained":"outlined",onClick:function(){return O(!h)},sx:{marginRight:{xs:"0px",sm:"10px"}}},"Camera Settings")}),n.createElement(m.Z,{open:h,setOpen:O,name:"Camera Settings"},n.createElement(c.Z,{onClick:function(){return b(!f)}},n.createElement(u.Z,null,f?"Hide route":"Show route")),f?n.createElement(p.Z,{geojson:S,type:"line",paint:{"line-width":2,"line-color":"blue"}}):null,n.createElement(c.Z,{disabled:!e.pause,onClick:function(){return r((function(t){return y(y({},t),{},{pause:!1})}))}},n.createElement(u.Z,null,"Start")),n.createElement(c.Z,{disabled:e.pause,onClick:function(){return r((function(t){return y(y({},t),{},{pause:!0})}))}},n.createElement(u.Z,null,"Pause")),n.createElement(c.Z,{onClick:function(){r((function(t){return y(y({},t),{},{pause:!0,pitch:60,zoom:18,speed:1})})),setTimeout((function(){i.reset()}),50)}},n.createElement(u.Z,null,"Reset")),n.createElement(c.Z,null,n.createElement(u.Z,{id:"discrete-slider",style:{marginLeft:"10px",marginRight:"10px"}},n.createElement(u.Z,null,"Zoom:")),n.createElement(s.ZP,{value:e.zoom,onChange:function(t,e){r((function(t){return y(y({},t),{},{zoom:Number(e)})}))},getAriaValueText:function(t){return t.toString()},"aria-labelledby":"discrete-slider",step:1,marks:w,min:15,max:20,sx:{marginTop:"20px",paddingBottom:"20px",marginRight:"10px",maxWidth:"200px",minWidth:"150px"}})),n.createElement(c.Z,null,n.createElement(u.Z,{id:"discrete-slider2",style:{marginLeft:"10px",marginRight:"10px"}},"Speed:"),n.createElement(s.ZP,{value:e.speed,onChange:function(t,e){r((function(t){return y(y({},t),{},{speed:Number(e)})}))},getAriaValueText:function(t){return t.toString()},"aria-labelledby":"discrete-slider2",step:.1,marks:!0,min:.1,max:2,sx:{marginRight:"10px",maxWidth:"200px",minWidth:"150px"}})),n.createElement(c.Z,{onClick:function(){0===e.pitch?r((function(t){return y(y({},t),{},{pitch:60})})):r((function(t){return y(y({},t),{},{pitch:0})}))}},n.createElement(u.Z,null,0===e.pitch?"3D":"2D"))))}.bind({});O.parameters={},O.args={},O.parameters=y({storySource:{source:"() => {\n\tconst [state, setState] = useState({ pause: true, zoom: 18, speed: 1, pitch: 60 });\n\n\tconst CameraFollowPath = useCameraFollowPath({\n\t\troute: routeJson,\n\t\tpause: state.pause,\n\t\tpitch: state.pitch,\n\t\tzoom: state.zoom,\n\t\tspeed: state.speed,\n\t});\n\n\tconst [showRoute, setShowRoute] = useState(true);\n\tconst [openSidebar, setOpenSidebar] = useState(true);\n\n\treturn (\n\t\t<>\n\t\t\t<TopToolbar\n\t\t\t\tbuttons={\n\t\t\t\t\t<Button\n\t\t\t\t\t\tvariant={openSidebar ? 'contained' : 'outlined'}\n\t\t\t\t\t\tonClick={() => setOpenSidebar(!openSidebar)}\n\t\t\t\t\t\tsx={{ marginRight: { xs: '0px', sm: '10px' } }}\n\t\t\t\t\t>\n\t\t\t\t\t\tCamera Settings\n\t\t\t\t\t</Button>\n\t\t\t\t}\n\t\t\t/>\n\t\t\t<Sidebar\n\t\t\t\topen={openSidebar}\n\t\t\t\tsetOpen={setOpenSidebar}\n\t\t\t\tname={'Camera Settings'}\n\t\t\t>\n\t\t\t\t<MenuItem onClick={() => setShowRoute(!showRoute)}>\n\t\t\t\t\t<Typography>{showRoute ? 'Hide route' : 'Show route'}</Typography>\n\t\t\t\t</MenuItem>\n\t\t\t\t{showRoute ? (\n\t\t\t\t\t<MlGeoJsonLayer\n\t\t\t\t\t\tgeojson={routeJson}\n\t\t\t\t\t\ttype=\"line\"\n\t\t\t\t\t\tpaint={{\n\t\t\t\t\t\t\t'line-width': 2,\n\t\t\t\t\t\t\t'line-color': 'blue',\n\t\t\t\t\t\t}}\n\t\t\t\t\t/>\n\t\t\t\t) : null}\n\t\t\t\t<MenuItem\n\t\t\t\t\tdisabled={!state.pause}\n\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\tsetState((current) => {\n\t\t\t\t\t\t\treturn { ...current, pause: false };\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t>\n\t\t\t\t\t<Typography>Start</Typography>\n\t\t\t\t</MenuItem>\n\t\t\t\t<MenuItem\n\t\t\t\t\tdisabled={state.pause}\n\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\tsetState((current) => {\n\t\t\t\t\t\t\treturn { ...current, pause: true };\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t>\n\t\t\t\t\t<Typography>Pause</Typography>\n\t\t\t\t</MenuItem>\n\t\t\t\t<MenuItem\n\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\tsetState((current) => {\n\t\t\t\t\t\t\treturn { ...current, pause: true, pitch: 60, zoom: 18, speed: 1 };\n\t\t\t\t\t\t});\n\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\tCameraFollowPath.reset();\n\t\t\t\t\t\t}, 50);\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t<Typography>Reset</Typography>\n\t\t\t\t</MenuItem>\n\t\t\t\t<MenuItem>\n\t\t\t\t\t<Typography id=\"discrete-slider\" style={{ marginLeft: '10px', marginRight: '10px' }}>\n\t\t\t\t\t\t<Typography>Zoom:</Typography>\n\t\t\t\t\t</Typography>\n\t\t\t\t\t<Slider\n\t\t\t\t\t\tvalue={state.zoom}\n\t\t\t\t\t\tonChange={(ev, value) => {\n\t\t\t\t\t\t\tsetState((current) => {\n\t\t\t\t\t\t\t\treturn { ...current, zoom: Number(value) };\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tgetAriaValueText={(value) => value.toString()}\n\t\t\t\t\t\taria-labelledby=\"discrete-slider\"\n\t\t\t\t\t\t//valueLabelDisplay=\"auto\"\n\t\t\t\t\t\tstep={1}\n\t\t\t\t\t\tmarks={marks}\n\t\t\t\t\t\tmin={15}\n\t\t\t\t\t\tmax={20}\n\t\t\t\t\t\tsx={{\n\t\t\t\t\t\t\tmarginTop: '20px',\n\t\t\t\t\t\t\tpaddingBottom: '20px',\n\t\t\t\t\t\t\tmarginRight: '10px',\n\t\t\t\t\t\t\tmaxWidth: '200px',\n\t\t\t\t\t\t\tminWidth: '150px',\n\t\t\t\t\t\t}}\n\t\t\t\t\t/>\n\t\t\t\t</MenuItem>\n\t\t\t\t<MenuItem>\n\t\t\t\t\t<Typography id=\"discrete-slider2\" style={{ marginLeft: '10px', marginRight: '10px' }}>\n\t\t\t\t\t\tSpeed:\n\t\t\t\t\t</Typography>\n\t\t\t\t\t<Slider\n\t\t\t\t\t\tvalue={state.speed}\n\t\t\t\t\t\tonChange={(ev, value) => {\n\t\t\t\t\t\t\tsetState((current) => {\n\t\t\t\t\t\t\t\treturn { ...current, speed: Number(value) };\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tgetAriaValueText={(value) => value.toString()}\n\t\t\t\t\t\taria-labelledby=\"discrete-slider2\"\n\t\t\t\t\t\t//valueLabelDisplay=\"auto\"\n\t\t\t\t\t\tstep={0.1}\n\t\t\t\t\t\tmarks\n\t\t\t\t\t\tmin={0.1}\n\t\t\t\t\t\tmax={2}\n\t\t\t\t\t\tsx={{\n\t\t\t\t\t\t\tmarginRight: '10px',\n\t\t\t\t\t\t\tmaxWidth: '200px',\n\t\t\t\t\t\t\tminWidth: '150px',\n\t\t\t\t\t\t}}\n\t\t\t\t\t/>\n\t\t\t\t</MenuItem>\n\t\t\t\t<MenuItem\n\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\tif (state.pitch === 0) {\n\t\t\t\t\t\t\tsetState((current) => {\n\t\t\t\t\t\t\t\treturn { ...current, pitch: 60 };\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tsetState((current) => {\n\t\t\t\t\t\t\t\treturn { ...current, pitch: 0 };\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t<Typography>{state.pitch === 0 ? '3D' : '2D'}</Typography>\n\t\t\t\t</MenuItem>\n\t\t\t</Sidebar>\n\t\t</>\n\t);\n}"}},O.parameters);var j=["ExampleConfig"]},19850:(t,e,r)=>{r.r(e),r.d(e,{ExampleConfig:()=>s,__namedExportsOrder:()=>p,default:()=>u});var n=r(67294),o=r(74270),a=r(54553);function i(t){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i(t)}function l(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function c(t,e,r){return(e=function(t){var e=function(t,e){if("object"!==i(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!==i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===i(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}const u={title:"Hooks/useGpx",component:o.Z,argTypes:{},decorators:a.Z};var s=function(){return n.createElement("useGpx",null)}.bind({});s.parameters={},s.args={},s.parameters=function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?l(Object(r),!0).forEach((function(e){c(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({storySource:{source:"() => <useGpx />"}},s.parameters);var p=["ExampleConfig"]},48494:(t,e,r)=>{r.r(e),r.d(e,{ExampleConfig:()=>m,__namedExportsOrder:()=>d,default:()=>p});var n=r(67294),o=r(31805),a=r(54553),i=r(76956),l=r(52124);function c(t){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},c(t)}function u(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function s(t,e,r){return(e=function(t){var e=function(t,e){if("object"!==c(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!==c(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===c(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}const p={title:"hooks/useLayerFilter",component:o.Z,argTypes:{},decorators:a.Z};var m=function(t){return(0,o.Z)({layerId:"filter_test",filter:["==","name",t.filter_name]}),n.createElement(i.Z,{layerId:"filter_test",geojson:l})}.bind({});m.parameters={},m.args={filter_name:"Mauspfad"},m.argTypes={filter_name:{options:["Mauspfad","Windeckstraße","Münsterplatz","Postrstraße","In der Sürst","Remiglustraße"],control:{type:"radio"}}},m.parameters=function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?u(Object(r),!0).forEach((function(e){s(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({storySource:{source:"(args: { filter_name: string }) => {\n\tuseLayerFilter({ layerId: 'filter_test', filter: ['==', 'name', args.filter_name] });\n\treturn <MlGeoJsonLayer layerId=\"filter_test\" geojson={sample as FeatureCollection} />;\n}"}},m.parameters);var d=["ExampleConfig"]},91594:(t,e,r)=>{r.r(e),r.d(e,{ExampleConfig:()=>s,__namedExportsOrder:()=>p,default:()=>u});var n=r(67294),o=r(77062),a=r(54553);function i(t){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i(t)}function l(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function c(t,e,r){return(e=function(t){var e=function(t,e){if("object"!==i(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!==i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===i(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}const u={title:"Hooks/useLayerHoverPopup",component:o.Z,argTypes:{},decorators:a.Z};var s=function(){return n.createElement("useLayerHoverPopup",null)}.bind({});s.parameters={},s.args={},s.parameters=function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?l(Object(r),!0).forEach((function(e){c(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({storySource:{source:"() => <useLayerHoverPopup />"}},s.parameters);var p=["ExampleConfig"]},9491:(t,e,r)=>{r.r(e),r.d(e,{IncludeBaseLayers:()=>d,MatchLayerIdRegexp:()=>y,MatchLayerIdString:()=>f,NonBaseLayersOnly:()=>b,ViewportOnly:()=>m,__namedExportsOrder:()=>g,default:()=>s});var n=r(67294),o=r(90686),a=r(61669);function i(t){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i(t)}function l(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function c(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?l(Object(r),!0).forEach((function(e){u(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function u(t,e,r){return(e=function(t){var e=function(t,e){if("object"!==i(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!==i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===i(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}const s={title:"Hooks/useMapState",component:o.Z,argTypes:{},decorators:a.Z};var p=function(t){var e=(0,o.Z)(c({},t));return(0,n.useEffect)((function(){}),[e.layers]),n.createElement(n.Fragment,null,n.createElement("div",{style:{position:"fixed",zIndex:1e4,display:"flex",flexWrap:"wrap",top:0,left:0,right:0,bottom:0,maxHeight:"100VH",backgroundColor:"rgba(80,80,80,.8)",padding:"50px",fontSize:"20px",color:"#51ff09",overflow:"hidden",pointerEvents:"none"}},n.createElement("pre",null,JSON.stringify(e,null,"\t"))))},m=p.bind({});m.parameters={},m.args={mapId:"map_1",watch:{viewport:!0,layers:!1,sources:!1}};var d=p.bind({});d.parameters={},d.args={mapId:"map_1",watch:{viewport:!1,layers:!0,sources:!1},filter:{includeBaseLayers:!0}};var f=p.bind({});f.parameters={},f.args={mapId:"map_1",watch:{viewport:!1,layers:!0,sources:!1},filter:{includeBaseLayers:!0,matchLayerIds:"water"}};var y=p.bind({});y.parameters={},y.args={mapId:"map_1",watch:{viewport:!1,layers:!0,sources:!1},filter:{includeBaseLayers:!0,matchLayerIds:/water/}};var b=p.bind({});b.parameters={},b.args={mapId:"map_1",watch:{viewport:!1,layers:!0,sources:!1},filter:{includeBaseLayers:!1}},m.parameters=c({storySource:{source:'(props) => {\n\tconst mapState = useMapState({ ...props });\n\n\tuseEffect(() => {\n\n\t\n\t}, [mapState.layers])\n\n\treturn (\n\t\t<>\n\t\t<div\n\t\t\t\tstyle={{\n\t\t\t\t\tposition: "fixed",\n\t\t\t\t\tzIndex: 10000,\n\t\t\t\t\tdisplay: "flex",\n\t\t\t\t\tflexWrap: "wrap",\n\t\t\t\t\ttop: 0,\n\t\t\t\t\tleft: 0,\n\t\t\t\t\tright: 0,\n\t\t\t\t\tbottom: 0,\n\t\t\t\t\tmaxHeight:\'100VH\',\n\t\t\t\t\tbackgroundColor: "rgba(80,80,80,.8)",\n\t\t\t\t\tpadding: "50px",\n\t\t\t\t\tfontSize: "20px",\n\t\t\t\t\tcolor: "#51ff09",\n\t\t\t\t\toverflow:\'hidden\',\n\t\t\t\t\tpointerEvents: "none",\n\t\t\t\t}}\n\t\t>\n\n\t\t\t\t<pre>{JSON.stringify(mapState, null, "\t")}</pre>\n\n\n\t\t</div>\n\t\t</>\n\t);\n}'}},m.parameters),d.parameters=c({storySource:{source:'(props) => {\n\tconst mapState = useMapState({ ...props });\n\n\tuseEffect(() => {\n\n\t\n\t}, [mapState.layers])\n\n\treturn (\n\t\t<>\n\t\t<div\n\t\t\t\tstyle={{\n\t\t\t\t\tposition: "fixed",\n\t\t\t\t\tzIndex: 10000,\n\t\t\t\t\tdisplay: "flex",\n\t\t\t\t\tflexWrap: "wrap",\n\t\t\t\t\ttop: 0,\n\t\t\t\t\tleft: 0,\n\t\t\t\t\tright: 0,\n\t\t\t\t\tbottom: 0,\n\t\t\t\t\tmaxHeight:\'100VH\',\n\t\t\t\t\tbackgroundColor: "rgba(80,80,80,.8)",\n\t\t\t\t\tpadding: "50px",\n\t\t\t\t\tfontSize: "20px",\n\t\t\t\t\tcolor: "#51ff09",\n\t\t\t\t\toverflow:\'hidden\',\n\t\t\t\t\tpointerEvents: "none",\n\t\t\t\t}}\n\t\t>\n\n\t\t\t\t<pre>{JSON.stringify(mapState, null, "\t")}</pre>\n\n\n\t\t</div>\n\t\t</>\n\t);\n}'}},d.parameters),f.parameters=c({storySource:{source:'(props) => {\n\tconst mapState = useMapState({ ...props });\n\n\tuseEffect(() => {\n\n\t\n\t}, [mapState.layers])\n\n\treturn (\n\t\t<>\n\t\t<div\n\t\t\t\tstyle={{\n\t\t\t\t\tposition: "fixed",\n\t\t\t\t\tzIndex: 10000,\n\t\t\t\t\tdisplay: "flex",\n\t\t\t\t\tflexWrap: "wrap",\n\t\t\t\t\ttop: 0,\n\t\t\t\t\tleft: 0,\n\t\t\t\t\tright: 0,\n\t\t\t\t\tbottom: 0,\n\t\t\t\t\tmaxHeight:\'100VH\',\n\t\t\t\t\tbackgroundColor: "rgba(80,80,80,.8)",\n\t\t\t\t\tpadding: "50px",\n\t\t\t\t\tfontSize: "20px",\n\t\t\t\t\tcolor: "#51ff09",\n\t\t\t\t\toverflow:\'hidden\',\n\t\t\t\t\tpointerEvents: "none",\n\t\t\t\t}}\n\t\t>\n\n\t\t\t\t<pre>{JSON.stringify(mapState, null, "\t")}</pre>\n\n\n\t\t</div>\n\t\t</>\n\t);\n}'}},f.parameters),y.parameters=c({storySource:{source:'(props) => {\n\tconst mapState = useMapState({ ...props });\n\n\tuseEffect(() => {\n\n\t\n\t}, [mapState.layers])\n\n\treturn (\n\t\t<>\n\t\t<div\n\t\t\t\tstyle={{\n\t\t\t\t\tposition: "fixed",\n\t\t\t\t\tzIndex: 10000,\n\t\t\t\t\tdisplay: "flex",\n\t\t\t\t\tflexWrap: "wrap",\n\t\t\t\t\ttop: 0,\n\t\t\t\t\tleft: 0,\n\t\t\t\t\tright: 0,\n\t\t\t\t\tbottom: 0,\n\t\t\t\t\tmaxHeight:\'100VH\',\n\t\t\t\t\tbackgroundColor: "rgba(80,80,80,.8)",\n\t\t\t\t\tpadding: "50px",\n\t\t\t\t\tfontSize: "20px",\n\t\t\t\t\tcolor: "#51ff09",\n\t\t\t\t\toverflow:\'hidden\',\n\t\t\t\t\tpointerEvents: "none",\n\t\t\t\t}}\n\t\t>\n\n\t\t\t\t<pre>{JSON.stringify(mapState, null, "\t")}</pre>\n\n\n\t\t</div>\n\t\t</>\n\t);\n}'}},y.parameters),b.parameters=c({storySource:{source:'(props) => {\n\tconst mapState = useMapState({ ...props });\n\n\tuseEffect(() => {\n\n\t\n\t}, [mapState.layers])\n\n\treturn (\n\t\t<>\n\t\t<div\n\t\t\t\tstyle={{\n\t\t\t\t\tposition: "fixed",\n\t\t\t\t\tzIndex: 10000,\n\t\t\t\t\tdisplay: "flex",\n\t\t\t\t\tflexWrap: "wrap",\n\t\t\t\t\ttop: 0,\n\t\t\t\t\tleft: 0,\n\t\t\t\t\tright: 0,\n\t\t\t\t\tbottom: 0,\n\t\t\t\t\tmaxHeight:\'100VH\',\n\t\t\t\t\tbackgroundColor: "rgba(80,80,80,.8)",\n\t\t\t\t\tpadding: "50px",\n\t\t\t\t\tfontSize: "20px",\n\t\t\t\t\tcolor: "#51ff09",\n\t\t\t\t\toverflow:\'hidden\',\n\t\t\t\t\tpointerEvents: "none",\n\t\t\t\t}}\n\t\t>\n\n\t\t\t\t<pre>{JSON.stringify(mapState, null, "\t")}</pre>\n\n\n\t\t</div>\n\t\t</>\n\t);\n}'}},b.parameters);var g=["ViewportOnly","IncludeBaseLayers","MatchLayerIdString","MatchLayerIdRegexp","NonBaseLayersOnly"]},33024:(t,e,r)=>{r.r(e),r.d(e,{__namedExportsOrder:()=>x,default:()=>h,removeSourceExample:()=>j,useGeojsonSourceExample:()=>S,useRasterSourceExample:()=>O,useVectorSourceExample:()=>w});var n=r(13116),o=r(67294),a=r(31072),i=r(90686),l=r(86841),c=r(18434),u=r(72642),s=r(67570),p=r(61669);const m=JSON.parse('{"type":"Feature","geometry":{"type":"Point","coordinates":[7.0851268,50.73884],"properties":{"title":"Bonn"}}}');function d(t){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},d(t)}function f(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,a,i,l=[],c=!0,u=!1;try{if(a=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(l.push(n.value),l.length!==e);c=!0);}catch(t){u=!0,o=t}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return l}}(t,e)||function(t,e){if(t){if("string"==typeof t)return y(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?y(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function b(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function g(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?b(Object(r),!0).forEach((function(e){v(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):b(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function v(t,e,r){return(e=function(t){var e=function(t,e){if("object"!==d(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!==d(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===d(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}const h={title:"Hooks/useSource",component:n.Z,argTypes:{},decorators:p.Z};var S=function(t){var e=(0,n.Z)(g({},t)).source;return(0,l.Z)({mapId:t.mapId,layerId:"layer1",options:{source:null!=e&&e.id?e.id:"",type:"circle",paint:{"circle-radius":6,"circle-color":"red"}}}),(0,l.Z)({mapId:t.mapId,layerId:"layer2",options:{source:null!=e&&e.id?e.id:"",type:"circle",paint:{"circle-radius":4,"circle-color":"green"}}}),o.createElement(o.Fragment,null)}.bind({});S.args={mapId:"map_1",sourceId:"geojson-source",source:{type:"geojson",data:m}};var w=function(t){(0,n.Z)(g({},t));var e=(0,a.Z)({mapId:t.mapId});return(0,o.useEffect)((function(){e.map&&(e.map.addLayer({id:"vector-lineLayer",type:"line",source:t.sourceId,minzoom:0,maxzoom:22,"source-layer":"landuse",layout:{"line-cap":"round","line-join":"round"},paint:{"line-width":2,"line-color":"#ff0000"}},!1,e.componentId),e.map.addLayer({id:"vector-FillLayer",type:"fill",source:t.sourceId,minzoom:0,maxzoom:22,"source-layer":"landuse",paint:{"fill-color":"#32a850","fill-opacity":.4}},!1,e.componentId))}),[e.map]),o.createElement(o.Fragment,null)}.bind({});w.args={mapId:"map_1",sourceId:"vector-source",source:{type:"vector",tiles:["https://wms.wheregroup.com/tileserver/tile/tileserver.php?/europe-0-14/index.json?/europe-0-14/{z}/{x}/{y}.pbf"],tilesize:512,attribution:""}};var O=function(t){(0,n.Z)(g({},t));var e=(0,a.Z)({mapId:t.mapId});return(0,o.useEffect)((function(){e.map&&e.map.addLayer({id:"raster-wms",type:"raster",source:t.sourceId,minzoom:0,maxzoom:22},!1,e.componentId)}),[e.map]),o.createElement(o.Fragment,null)}.bind({});O.args={mapId:"map_1",sourceId:"raster-source",source:{type:"raster",tiles:["https://www.wms.nrw.de/geobasis/wms_nw_uraufnahme?bbox={bbox-epsg-3857}&format=image/png&service=WMS&version=1.1.1&request=GetMap&srs=EPSG:3857&width=256&height=256&styles=&layers=nw_uraufnahme_rw"],tilesize:256,attribution:""}};var j=function(t){var e=f((0,o.useState)(!0),2),r=e[0],n=e[1],l=f((0,o.useState)([]),2),p=l[0],m=l[1],d=(0,a.Z)({mapId:t.mapId}),y=(0,i.Z)({mapId:t.mapId,watch:{viewport:!1,layers:!0,sources:!0},filter:{includeBaseLayers:!1}});return(0,o.useEffect)((function(){d.map&&d.map.map.on("sourcedata",(function(){var t,e,r,n;null!=d&&null!==(t=d.map)&&void 0!==t&&null!==(e=t.map)&&void 0!==e&&e.style.sourceCaches&&m(Object.keys(null==d||null===(r=d.map)||void 0===r||null===(n=r.map)||void 0===n?void 0:n.style.sourceCaches))}))}),[d.map]),o.createElement(o.Fragment,null,o.createElement(c.Z,{buttons:o.createElement(u.Z,{color:"primary",variant:r?"contained":"outlined",onClick:function(){return n(!r)}},"Ml GeoJsonLayer With Source JSX Active?")}),r&&o.createElement(s.Z,null),o.createElement("div",{style:{position:"fixed",zIndex:1290,display:"flex",flexWrap:"wrap",top:"62px",left:0,right:0,bottom:0,maxHeight:"100VH",backgroundColor:"rgba(80,80,80,.8)",padding:"50px",fontSize:"20px",color:"#51ff09",overflow:"hidden",pointerEvents:"none"}},(null==p?void 0:p.length)>0&&o.createElement("div",null,"Active sources: ",o.createElement("br",null)," ",JSON.stringify(p,null,"  "),o.createElement("br",null)," ",o.createElement("br",null)," Active layers : ",o.createElement("pre",null,JSON.stringify(y,null,"  ")))))}.bind({});j.args={mapId:"map_1"},S.parameters=g({storySource:{source:"(args) => {\n\tconst { source } = useSource({ ...args });\n\n\tuseLayer({\n\t\tmapId: args.mapId,\n\t\tlayerId: 'layer1',\n\t\toptions: {\n\t\tsource: source?.id ? source.id : '',\n\t\t\ttype: 'circle',\n\t\t\tpaint: {\n\t\t\t\t'circle-radius': 6,\n\t\t\t\t'circle-color': 'red',\n\t\t\t},\n\t\t},\n\t});\n\tuseLayer({\n\t\tmapId: args.mapId,\n\t\tlayerId: 'layer2',\n\t\toptions: {\n\t\tsource: source?.id ? source.id : '',\n\t\t\ttype: 'circle',\n\t\t\tpaint: {\n\t\t\t\t'circle-radius': 4,\n\t\t\t\t'circle-color': 'green',\n\t\t\t},\n\t\t},\n\t});\n\treturn <></>;\n}"}},S.parameters),w.parameters=g({storySource:{source:"(args) => {\n\tuseSource({ ...args });\n\tconst mapHook = useMap({\n\t\tmapId: args.mapId,\n\t});\n\tuseEffect(() => {\n\t\tif (!mapHook.map) return;\n\t\tmapHook.map.addLayer(\n\t\t\t{\n\t\t\t\tid: 'vector-lineLayer',\n\t\t\t\ttype: 'line',\n\t\t\t\tsource: args.sourceId,\n\t\t\t\tminzoom: 0,\n\t\t\t\tmaxzoom: 22,\n\t\t\t\t'source-layer': 'landuse',\n\t\t\t\tlayout: {\n\t\t\t\t\t'line-cap': 'round',\n\t\t\t\t\t'line-join': 'round',\n\t\t\t\t},\n\t\t\t\tpaint: { 'line-width': 2, 'line-color': '#ff0000' },\n\t\t\t},\n\t\t\tfalse,\n\t\t\tmapHook.componentId\n\t\t);\n\t\tmapHook.map.addLayer(\n\t\t\t{\n\t\t\t\tid: 'vector-FillLayer',\n\t\t\t\ttype: 'fill',\n\t\t\t\tsource: args.sourceId,\n\t\t\t\tminzoom: 0,\n\t\t\t\tmaxzoom: 22,\n\t\t\t\t'source-layer': 'landuse',\n\t\t\t\tpaint: {\n\t\t\t\t\t'fill-color': '#32a850',\n\t\t\t\t\t'fill-opacity': 0.4,\n\t\t\t\t},\n\t\t\t},\n\t\t\tfalse,\n\t\t\tmapHook.componentId\n\t\t);\n\t}, [mapHook.map]);\n\treturn <></>;\n}"}},w.parameters),O.parameters=g({storySource:{source:"(args) => {\n\tuseSource({ ...args });\n\tconst mapHook = useMap({\n\t\tmapId: args.mapId,\n\t});\n\tuseEffect(() => {\n\t\tif (!mapHook.map) return;\n\t\tmapHook.map.addLayer(\n\t\t\t{\n\t\t\t\tid: 'raster-wms',\n\t\t\t\ttype: 'raster',\n\t\t\t\tsource: args.sourceId,\n\t\t\t\tminzoom: 0,\n\t\t\t\tmaxzoom: 22,\n\t\t\t},\n\t\t\tfalse,\n\t\t\tmapHook.componentId\n\t\t);\n\t}, [mapHook.map]);\n\treturn <></>;\n}"}},O.parameters),j.parameters=g({storySource:{source:"(args) => {\n\tconst [sourceStatus, setSourceStatus] = useState(true);\n\tconst [activeSources, setActiveSources] = useState([]);\n\tconst mapHook = useMap({\n\t\tmapId: args.mapId,\n\t});\n\n\tconst mapState = useMapState({\n\t\tmapId: args.mapId,\n\t\twatch: {\n\t\t\tviewport: false,\n\t\t\tlayers: true,\n\t\t\tsources: true,\n\t\t},\n\t\tfilter: {\n\t\t\tincludeBaseLayers: false,\n\t\t},\n\t});\n\n\tuseEffect(() => {\n\t\tif (!mapHook.map) {\n\t\t\treturn;\n\t\t}\n\n\t\tmapHook.map.map.on('sourcedata', () => {\n\t\t\tif (mapHook?.map?.map?.style.sourceCaches) {\n\t\t\t\tsetActiveSources(Object.keys(mapHook?.map?.map?.style.sourceCaches));\n\t\t\t}\n\t\t});\n\t}, [mapHook.map]);\n\n\treturn (\n\t\t<>\n\t\t\t<TopToolbar\n\t\t\t\tbuttons={\n\t\t\t\t\t<Button\n\t\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\t\tvariant={sourceStatus ? 'contained' : 'outlined'}\n\t\t\t\t\t\tonClick={() => setSourceStatus(!sourceStatus)}\n\t\t\t\t\t>\n\t\t\t\t\t\tMl GeoJsonLayer With Source JSX Active?\n\t\t\t\t\t</Button>\n\t\t\t\t}\n\t\t\t/>\n\t\t\t{sourceStatus && <MlGeojsonLayerWithSource></MlGeojsonLayerWithSource>}\n\t\t\t<div\n\t\t\t\tstyle={{\n\t\t\t\t\tposition: 'fixed',\n\t\t\t\t\tzIndex: 1290,\n\t\t\t\t\tdisplay: 'flex',\n\t\t\t\t\tflexWrap: 'wrap',\n\t\t\t\t\ttop: '62px',\n\t\t\t\t\tleft: 0,\n\t\t\t\t\tright: 0,\n\t\t\t\t\tbottom: 0,\n\t\t\t\t\tmaxHeight: '100VH',\n\t\t\t\t\tbackgroundColor: 'rgba(80,80,80,.8)',\n\t\t\t\t\tpadding: '50px',\n\t\t\t\t\tfontSize: '20px',\n\t\t\t\t\tcolor: '#51ff09',\n\t\t\t\t\toverflow: 'hidden',\n\t\t\t\t\tpointerEvents: 'none',\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t{activeSources?.length > 0 && (\n\t\t\t\t\t<div>\n\t\t\t\t\t\tActive sources: <br></br> {JSON.stringify(activeSources, null, '  ')}\n\t\t\t\t\t\t<br></br> <br></br> Active layers : {}\n\t\t\t\t\t\t<pre>{JSON.stringify(mapState, null, '  ')}</pre>\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\t\t\t</div>\n\t\t</>\n\t);\n}"}},j.parameters);var x=["useGeojsonSourceExample","useVectorSourceExample","useRasterSourceExample","removeSourceExample"]},14573:(t,e,r)=>{r.d(e,{Z:()=>l});var n=r(24613),o=r.n(n),a=r(67294),i=function(t){return(0,a.useEffect)((function(){if(t.protocol&&"function"==typeof t.handler)return o().addProtocol(t.protocol,t.handler),function(){o().removeProtocol(t.protocol)}}),[t]),{}};i.defaultProps={mapId:void 0};const l=i;try{i.displayName="useAddProtocol",i.__docgenInfo={description:"Enables the use of custom protocols (basically custom tile load functions) in the maplibre-gl-js library.",displayName:"useAddProtocol",props:{protocol:{defaultValue:null,description:"the protocol string, for example `mbtiles`\nIn this example the handler function is called for all tile requests that start with the string `mbtiles://`",name:"protocol",required:!0,type:{name:"string"}},handler:{defaultValue:null,description:"Custom load tile function that will be called when using a source that starts with a custom url schema.",name:"handler",required:!0,type:{name:"(requestParameters: RequestParameters, callback: ResponseCallback<any>) => Cancelable"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/hooks/useAddProtocol/useAddProtocol.tsx#useAddProtocol"]={docgenInfo:i.__docgenInfo,name:"useAddProtocol",path:"src/hooks/useAddProtocol/useAddProtocol.tsx#useAddProtocol"})}catch(t){}},46846:(t,e,r)=>{r.d(e,{Z:()=>l});var n=r(67294),o=r(30062),a=r(31072),i=function(t){var e=(0,n.useRef)(!1),r=(0,n.useRef)(t.pause),i=(0,n.useRef)(t.zoom),l=(0,n.useRef)(t.pitch),c=(0,n.useRef)(1),u=(0,n.useRef)(t.speed),s=(0,n.useRef)(),p=t.kmPerStep||.01,m=o.sIr(t.route),d=t.stepDuration||70,f=(0,a.Z)({mapId:t.mapId,waitForLayer:t.insertBeforeLayer});(0,n.useEffect)((function(){r.current=t.pause,r.current||v()}),[t.pause]),(0,n.useEffect)((function(){f.map&&(i.current=t.zoom,void 0!==i.current&&f.map.map.getZoom()!==i.current&&f.map.map.setZoom(i.current))}),[f.map,t.zoom]),(0,n.useEffect)((function(){f.map&&(l.current=t.pitch,void 0!==l.current&&l.current!==f.map.map.getPitch()&&f.map.map.setPitch(l.current))}),[f.map,t.pitch]),(0,n.useEffect)((function(){u.current=t.speed}),[t.speed]);var y=(0,n.useCallback)((function(){f.map&&(f.map.map.scrollZoom.disable(),f.map.map.boxZoom.disable(),f.map.map.dragRotate.disable(),f.map.map.dragPan.disable(),f.map.map.keyboard.disable(),f.map.map.doubleClickZoom.disable(),f.map.map.touchZoomRotate.disable())}),[f.map]),b=(0,n.useCallback)((function(){f.map&&(f.map.map.scrollZoom.enable(),f.map.map.boxZoom.enable(),f.map.map.dragRotate.enable(),f.map.map.dragPan.enable(),f.map.map.keyboard.enable(),f.map.map.doubleClickZoom.enable(),f.map.map.touchZoomRotate.enable())}),[f.map]);function g(){if(f.map&&t.route){var e,r=o.VWR(t.route);r&&r.length>3&&(e=[[r[0],r[1]],[r[2],r[3]]],f.map.map.fitBounds(e,{padding:100}))}}function v(){if(f.map)if(r.current)b();else{y(),void 0!==i.current&&f.map.map.getZoom()!==i.current&&f.map.map.setZoom(i.current);var e=o.$1t(t.route,c.current*p).geometry.coordinates;c.current*p<m?(f.map.map.easeTo({center:e,bearing:o.Y30(o.xmu([f.map.map.getCenter().lng,f.map.map.getCenter().lat]),o.xmu(e)),duration:d,essential:!0}),void 0!==u.current?c.current=c.current+u.current:c.current++,console.log("PAN MOVE"),setTimeout((function(){v()}),100)):(f.map.map.setPitch(0),g(),b(),console.log("ENABLE CONTROLS"),c.current=1)}}return(0,n.useEffect)((function(){f.map&&!e.current&&(e.current=!0,g())}),[f.map]),(0,n.useEffect)((function(){return function(){s.current&&clearTimeout(s.current)}}),[]),{play:v,reset:function(){f.map&&(g(),b(),c.current=1)}}};i.defaultProps={mapId:void 0,zoom:18};const l=i;try{i.displayName="useCameraFollowPath",i.__docgenInfo={description:"Component template",displayName:"useCameraFollowPath",props:{mapId:{defaultValue:{value:"undefined"},description:"Id of the target MapLibre instance in mapContext",name:"mapId",required:!1,type:{name:"string | undefined"}},insertBeforeLayer:{defaultValue:null,description:'Id of an existing layer in the mapLibre instance to help specify the layer order\nThis layer will be visually beneath the layer with the "insertBeforeLayer" id.',name:"insertBeforeLayer",required:!1,type:{name:"string | undefined"}},pause:{defaultValue:null,description:"",name:"pause",required:!1,type:{name:"boolean | undefined"}},zoom:{defaultValue:{value:"18"},description:"",name:"zoom",required:!1,type:{name:"number | undefined"}},pitch:{defaultValue:null,description:"",name:"pitch",required:!1,type:{name:"number | undefined"}},speed:{defaultValue:null,description:"",name:"speed",required:!1,type:{name:"number | undefined"}},kmPerStep:{defaultValue:null,description:"",name:"kmPerStep",required:!1,type:{name:"number | undefined"}},route:{defaultValue:null,description:"",name:"route",required:!1,type:{name:"any"}},stepDuration:{defaultValue:null,description:"",name:"stepDuration",required:!1,type:{name:"number | undefined"}},timeoutId:{defaultValue:null,description:"",name:"timeoutId",required:!1,type:{name:"number | undefined"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/hooks/useCameraFollowPath/useCameraFollowPath.tsx#useCameraFollowPath"]={docgenInfo:i.__docgenInfo,name:"useCameraFollowPath",path:"src/hooks/useCameraFollowPath/useCameraFollowPath.tsx#useCameraFollowPath"})}catch(t){}},76273:(t,e,r)=>{r.d(e,{Z:()=>y});var n=r(67294),o=r(31072),a=r(24613),i=r(91819);function l(t){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},l(t)}function c(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function u(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?c(Object(r),!0).forEach((function(e){s(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function s(t,e,r){return(e=function(t){var e=function(t,e){if("object"!==l(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!==l(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===l(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var p=function(t){var e=t.width,r=t.height,n=document.createElement("div");n.className="hidden-map",n.style.width="0px",n.style.height="0px",n.style.overflow="hidden",document.body.appendChild(n);var o=document.createElement("div");o.style.width=e+"px",o.style.height=r+"px",n.appendChild(o);var l=t.map.map.getStyle(),c=function(){var t=l.sources[s];Object.keys(t).forEach((function(e){t[e]||delete t[e]}))};for(var s in l.sources)c();var p=new a.Map({container:o,center:t.map.map.getCenter(),zoom:t.map.map.getZoom(),bearing:0,pitch:0,interactive:!1,preserveDrawingBuffer:!0,fadeDuration:0,attributionControl:!1,style:l}),m=p._cameraForBoxAndBearing([t.bboxUnrotated[0],t.bboxUnrotated[1]],[t.bboxUnrotated[2],t.bboxUnrotated[3]],t.bearing+t.map.map.getBearing());return p._fitInternal(m),new Promise((function(e){console.log("before idle"),p.once("idle",(function(){var r=u(u({},t),{},{renderMap:p,hiddenContainer:n,createPdf:function(e){return function(t){var e=new i.ZP({orientation:"portrait"===(null==t?void 0:t.orientation)?"p":"l",unit:"mm",compress:!0,format:t.format});return Object.defineProperty(window,"devicePixelRatio",{get:function(){return 3.125}}),new Promise((function(r){var n;e.addImage(t.renderMap.getCanvas().toDataURL("image/png"),"png",0,0,e.internal.pageSize.getWidth(),e.internal.pageSize.getHeight(),void 0,"FAST"),t.renderMap.remove(),null===(n=t.hiddenContainer.parentNode)||void 0===n||n.removeChild(t.hiddenContainer);var o=u(u({},t),{},{pdf:e,downloadPdf:function(t){return function(t){return t.pdf.save("Map.pdf"),new Promise((function(e){e(u({},t))}))}(u(u({},o),t))}});r(o)}))}(u(u({},t),{},{renderMap:p,hiddenContainer:n},e))},createPng:function(e){return function(t){return new Promise((function(e){var r=t.renderMap.getCanvas().toDataURL("image/png"),n=u(u({},t),{},{png:r,downloadPng:function(t){return function(t){var e=document.createElement("a");return e.download=null!=t&&t.name?t.name+".png":"map.png",e.href=t.png,document.body.appendChild(e),e.click(),document.body.removeChild(e),new Promise((function(e){e(u({},t))}))}(u(u({},n),t))}});e(n)}))}(u(u({},t),{},{renderMap:p,hiddenContainer:n},e))}});e(r)}))}))};function m(t){return m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},m(t)}function d(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function f(t,e,r){return(e=function(t){var e=function(t,e){if("object"!==m(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!==m(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===m(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function y(t){var e=(0,o.Z)({mapId:t.mapId}),r=(0,n.useMemo)((function(){if(e.map)return function(t){return p(function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?d(Object(r),!0).forEach((function(e){f(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({map:e.map},t))}}),[e.map]);return{createExport:r}}},52122:(t,e,r)=>{r.d(e,{Z:()=>p});var n=r(67294),o=(r(93478),r(1307)),a=r.n(o),i=r(31072),l=r(98396);function c(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,a,i,l=[],c=!0,u=!1;try{if(a=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(l.push(n.value),l.length!==e);c=!0);}catch(t){u=!0,o=t}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return l}}(t,e)||function(t,e){if(t){if("string"==typeof t)return u(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?u(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var s=function(t){var e,r=(0,n.useRef)(),o=(0,i.Z)({mapId:t.mapId,waitForLayer:t.insertBeforeLayer}),u=(0,n.useRef)(!1),s=c((0,n.useState)(!1),2),p=s[0],m=s[1],d=c((0,n.useState)(),2),f=d[0],y=d[1],b=[{id:"gl-draw-polygon-fill-inactive",type:"fill",filter:["all",["==","active","false"],["==","$type","Polygon"],["!=","mode","static"]],paint:{"fill-color":"#3bb2d0","fill-outline-color":"#3bb2d0","fill-opacity":.1}},{id:"gl-draw-polygon-fill-active",type:"fill",filter:["all",["==","active","true"],["==","$type","Polygon"]],paint:{"fill-color":"#fbb03b","fill-outline-color":"#fbb03b","fill-opacity":.1}},{id:"gl-draw-polygon-midpoint",type:"circle",filter:["all",["==","$type","Point"],["==","meta","midpoint"]],paint:{"circle-radius":(e=(0,l.Z)((function(t){return t.breakpoints.down("md")})))?7:5,"circle-color":"#fbb03b"}},{id:"gl-draw-polygon-stroke-inactive",type:"line",filter:["all",["==","active","false"],["==","$type","Polygon"],["!=","mode","static"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#3bb2d0","line-width":2}},{id:"gl-draw-polygon-stroke-active",type:"line",filter:["all",["==","active","true"],["==","$type","Polygon"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#fbb03b","line-dasharray":[.2,2],"line-width":2}},{id:"gl-draw-line-inactive",type:"line",filter:["all",["==","active","false"],["==","$type","LineString"],["!=","mode","static"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#3bb2d0","line-width":2}},{id:"gl-draw-line-active",type:"line",filter:["all",["==","$type","LineString"],["==","active","true"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#fbb03b","line-dasharray":[.2,2],"line-width":2}},{id:"gl-draw-polygon-and-line-vertex-stroke-inactive",type:"circle",filter:["all",["==","meta","vertex"],["==","$type","Point"],["!=","mode","static"]],paint:{"circle-radius":e?8:6,"circle-color":"#fff"}},{id:"gl-draw-polygon-and-line-vertex-inactive",type:"circle",filter:["all",["==","meta","vertex"],["==","$type","Point"],["!=","mode","static"]],paint:{"circle-radius":e?7:5,"circle-color":"#fbb03b"}},{id:"gl-draw-point-point-stroke-inactive",type:"circle",filter:["all",["==","active","false"],["==","$type","Point"],["==","meta","feature"],["!=","mode","static"]],paint:{"circle-radius":e?10:9,"circle-opacity":1,"circle-color":"#fff"}},{id:"gl-draw-point-inactive",type:"circle",filter:["all",["==","active","false"],["==","$type","Point"],["==","meta","feature"],["!=","mode","static"]],paint:{"circle-radius":e?7.5:6.5,"circle-color":"#3bb2d0"}},{id:"gl-draw-point-stroke-active",type:"circle",filter:["all",["==","$type","Point"],["==","active","true"],["!=","meta","midpoint"]],paint:{"circle-radius":e?11:10,"circle-color":"#fff"}},{id:"gl-draw-point-active",type:"circle",filter:["all",["==","$type","Point"],["!=","meta","midpoint"],["==","active","true"]],paint:{"circle-radius":e?8.5:7.5,"circle-color":"#fbb03b"}},{id:"gl-draw-polygon-fill-static",type:"fill",filter:["all",["==","mode","static"],["==","$type","Polygon"]],paint:{"fill-color":"#404040","fill-outline-color":"#404040","fill-opacity":.1}},{id:"gl-draw-polygon-stroke-static",type:"line",filter:["all",["==","mode","static"],["==","$type","Polygon"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#404040","line-width":2}},{id:"gl-draw-line-static",type:"line",filter:["all",["==","mode","static"],["==","$type","LineString"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#404040","line-width":2}},{id:"gl-draw-point-static",type:"circle",filter:["all",["==","mode","static"],["==","$type","Point"]],paint:{"circle-radius":e?8.5:6.5,"circle-color":"#404040"}}],g=(0,n.useCallback)((function(e){console.log("MlFeatureEditor mode change to "+e.mode),"function"==typeof t.onFinish&&"simple_select"===e.mode&&t.onFinish()}),[t.onFinish]);return(0,n.useEffect)((function(){var e;o.map&&!u.current&&(u.current=!0,o.map.map.style&&o.map.map.getSource("mapbox-gl-draw-cold")&&r.current&&(null===(e=r.current)||void 0===e||e.remove()),r.current=new(a())({displayControlsDefault:!1,defaultMode:t.mode||"simple_select",modes:Object.assign({},a().modes),userProperties:!0,styles:b}),o.map.addControl(r.current,"top-left",o.componentId),o.map.on("draw.modechange",g,o.componentId),m(!0))}),[o.map,t,u,g]),(0,n.useEffect)((function(){if(o.map&&p){var e=function(){if(r.current){var e,n,o=null===(e=(n=r.current).getAll)||void 0===e?void 0:e.call(n);y(null==o?void 0:o.features),"function"==typeof t.onChange&&t.onChange(null==o?void 0:o.features)}};return o.map.on("mouseup",e),o.map.on("touchend",e),function(){o.map&&(o.map.map.off("mouseup",e),o.map.map.off("touchend",e))}}}),[p,o.map]),(0,n.useEffect)((function(){var e;r.current&&null!==(e=t.geojson)&&void 0!==e&&e.geometry&&r.current.set({type:"FeatureCollection",features:[t.geojson]})}),[t.geojson,p]),(0,n.useEffect)((function(){var e,n,o,a;t.mode&&r.current&&(null===(e=r.current)||void 0===e||null===(n=e.getMode)||void 0===n?void 0:n.call(e))!==t.mode&&(null===(o=r.current)||void 0===o||null===(a=o.changeMode)||void 0===a||a.call(o,t.mode),"simple_select"!==t.mode&&"direct_select"!==t.mode&&r.current.set({type:"FeatureCollection",features:[]}))}),[t.mode,o.map]),{feature:f,drawToolsReady:p,draw:r.current}};const p=s;try{s.displayName="useFeatureEditor",s.__docgenInfo={description:"GeoJson Feature editor that allows to create or manipulate GeoJson data",displayName:"useFeatureEditor",props:{mapId:{defaultValue:null,description:"Id of the target MapLibre instance in mapContext",name:"mapId",required:!1,type:{name:"string | undefined"}},insertBeforeLayer:{defaultValue:null,description:'Id of an existing layer in the mapLibre instance to help specify the layer order\nThis layer will be visually beneath the layer with the "insertBeforeLayer" id.',name:"insertBeforeLayer",required:!1,type:{name:"string | undefined"}},geojson:{defaultValue:null,description:"Input GeoJson data at initialization",name:"geojson",required:!1,type:{name:"Feature<Geometry | GeometryCollection, Properties> | undefined"}},onChange:{defaultValue:null,description:"Callback function that is called each time the GeoJson data has changed within MlFeatureEditor.\nFirst parameter is the new GeoJson feature.",name:"onChange",required:!1,type:{name:"((para: GeoJSONObject[]) => void) | undefined"}},onFinish:{defaultValue:null,description:"Callback function that is called each time the GeoJson data within has been finished within MlFeatureEditor.\nFirst parameter is the new GeoJson feature.",name:"onFinish",required:!1,type:{name:"(() => void) | undefined"}},mode:{defaultValue:null,description:"Feature editor modes:\n- draw_line_string\n- draw_polygon\n- draw_point\n- simple_select\n- direct_select",name:"mode",required:!1,type:{name:"enum",value:[{value:"undefined"},{value:'"draw_line_string"'},{value:'"draw_polygon"'},{value:'"draw_point"'},{value:'"simple_select"'},{value:'"direct_select"'}]}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/hooks/useFeatureEditor/useFeatureEditor.tsx#useFeatureEditor"]={docgenInfo:s.__docgenInfo,name:"useFeatureEditor",path:"src/hooks/useFeatureEditor/useFeatureEditor.tsx#useFeatureEditor"})}catch(t){}},95349:(t,e,r)=>{r.d(e,{Z:()=>i});var n=r(3969),o=r(34155);function a(t){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a(t)}const i=function(){var t,e=/\s*/g,r=/^\s*|\s*$/g,i=/\s+/;function l(t){if(!t||!t.length)return 0;for(var e=0,r=0;e<t.length;e++)r=(r<<5)-r+t.charCodeAt(e)|0;return r}function c(t,e){return t.getElementsByTagName(e)}function u(t,e){return t.getAttribute(e)}function s(t,e){return parseFloat(u(t,e))}function p(t,e){var r=c(t,e);return r.length?r[0]:null}function m(t){for(var e=0,r=[];e<t.length;e++)r[e]=parseFloat(t[e]);return r}function d(t){var e;return t&&(e=t).normalize&&e.normalize(),t&&t.textContent||""}function f(t,e){var r,n,o={};for(n=0;n<e.length;n++)(r=p(t,e[n]))&&(o[e[n]]=d(r));return o}function y(t,e){for(var r in e)t[r]=e[r]}function b(t){return m(t.replace(e,"").split(","))}function g(t){for(var e=t.replace(r,"").split(i),n=[],o=0;o<e.length;o++)n.push(b(e[o]));return n}function v(t){var e,r=[s(t,"lon"),s(t,"lat")],n=p(t,"ele"),o=p(t,"gpxtpx:hr")||p(t,"hr"),a=p(t,"time");return n&&(e=parseFloat(d(n)),isNaN(e)||r.push(e)),{coordinates:r,time:a?d(a):null,heartRate:o?parseFloat(d(o)):null}}if("undefined"!=typeof XMLSerializer)t=new XMLSerializer;else{var h="object"===(void 0===o?"undefined":a(o))&&!o.browser,S="object"===("undefined"==typeof Titanium?"undefined":a(Titanium));if("object"!==("undefined"==typeof exports?"undefined":a(exports))||!h&&!S)throw new Error("Unable to initialize serializer");t=n.B}function w(e){return void 0!==e.xml?e.xml:t.serializeToString(e)}return{kml:function(t){for(var e={type:"FeatureCollection",features:[]},r={},n={},o={},a=["Polygon","LineString","Point","Track","gx:Track"],i=c(t,"Placemark"),s=c(t,"Style"),f=c(t,"StyleMap"),y=0;y<s.length;y++){var v=l(w(s[y])).toString(16);r["#"+u(s[y],"id")]=v,n[v]=s[y]}for(var h=0;h<f.length;h++){r["#"+u(f[h],"id")]=l(w(f[h])).toString(16);for(var S=c(f[h],"Pair"),O={},j=0;j<S.length;j++)O[d(p(S[j],"key"))]=d(p(S[j],"styleUrl"));o["#"+u(f[h],"id")]=O}for(var x=0;x<i.length;x++)e.features=e.features.concat(k(i[x]));function P(t){var e,r;return"#"===(t=t||"").substr(0,1)&&(t=t.substr(1)),6!==t.length&&3!==t.length||(e=t),8===t.length&&(r=parseInt(t.substr(0,2),16)/255,e="#"+t.substr(6,2)+t.substr(4,2)+t.substr(2,2)),[e,isNaN(r)?void 0:r]}function E(t){var e=c(t,"coord"),r=[],n=[];0===e.length&&(e=c(t,"gx:coord"));for(var o=0;o<e.length;o++)r.push(m(d(e[o]).split(" ")));for(var a=c(t,"when"),i=0;i<a.length;i++)n.push(d(a[i]));return{coords:r,times:n}}function I(t){var e,r,n,o,i,l=[],u=[];if(p(t,"MultiGeometry"))return I(p(t,"MultiGeometry"));if(p(t,"MultiTrack"))return I(p(t,"MultiTrack"));if(p(t,"gx:MultiTrack"))return I(p(t,"gx:MultiTrack"));for(n=0;n<a.length;n++)if(r=c(t,a[n]))for(o=0;o<r.length;o++)if(e=r[o],"Point"===a[n])l.push({type:"Point",coordinates:b(d(p(e,"coordinates")))});else if("LineString"===a[n])l.push({type:"LineString",coordinates:g(d(p(e,"coordinates")))});else if("Polygon"===a[n]){var s=c(e,"LinearRing"),m=[];for(i=0;i<s.length;i++)m.push(g(d(p(s[i],"coordinates"))));l.push({type:"Polygon",coordinates:m})}else if("Track"===a[n]||"gx:Track"===a[n]){var f=E(e);l.push({type:"LineString",coordinates:f.coords}),f.times.length&&u.push(f.times)}return{geoms:l,coordTimes:u}}function k(t){var e,a=I(t),i={},l=d(p(t,"name")),s=d(p(t,"address")),m=d(p(t,"styleUrl")),f=d(p(t,"description")),y=p(t,"TimeSpan"),b=p(t,"TimeStamp"),g=p(t,"ExtendedData"),v=p(t,"LineStyle"),h=p(t,"PolyStyle"),S=p(t,"visibility");if(!a.geoms.length)return[];if(l&&(i.name=l),s&&(i.address=s),m){"#"!==m[0]&&(m="#"+m),i.styleUrl=m,r[m]&&(i.styleHash=r[m]),o[m]&&(i.styleMapHash=o[m],i.styleHash=r[o[m].normal]);var w=n[i.styleHash];if(w){v||(v=p(w,"LineStyle")),h||(h=p(w,"PolyStyle"));var O=p(w,"IconStyle");if(O){var j=p(O,"Icon");if(j){var x=d(p(j,"href"));x&&(i.icon=x)}}}}if(f&&(i.description=f),y){var E=d(p(y,"begin")),k=d(p(y,"end"));i.timespan={begin:E,end:k}}if(b&&(i.timestamp=d(p(b,"when"))),v){var L=P(d(p(v,"color"))),T=L[0],C=L[1],A=parseFloat(d(p(v,"width")));T&&(i.stroke=T),isNaN(C)||(i["stroke-opacity"]=C),isNaN(A)||(i["stroke-width"]=A)}if(h){var Z=P(d(p(h,"color"))),M=Z[0],_=Z[1],H=d(p(h,"fill")),R=d(p(h,"outline"));M&&(i.fill=M),isNaN(_)||(i["fill-opacity"]=_),H&&(i["fill-opacity"]="1"===H?i["fill-opacity"]||1:0),R&&(i["stroke-opacity"]="1"===R?i["stroke-opacity"]||1:0)}if(g){var F=c(g,"Data"),B=c(g,"SimpleData");for(e=0;e<F.length;e++)i[F[e].getAttribute("name")]=d(p(F[e],"value"));for(e=0;e<B.length;e++)i[B[e].getAttribute("name")]=d(B[e])}S&&(i.visibility=d(S)),a.coordTimes.length&&(i.coordTimes=1===a.coordTimes.length?a.coordTimes[0]:a.coordTimes);var z={type:"Feature",geometry:1===a.geoms.length?a.geoms[0]:{type:"GeometryCollection",geometries:a.geoms},properties:i};return u(t,"id")&&(z.id=u(t,"id")),[z]}return e},gpx:function(t){var e,r,n,o,a=c(t,"trk"),i=c(t,"rte"),l=c(t,"wpt"),s={type:"FeatureCollection",features:[]};for(e=0;e<a.length;e++)(r=g(a[e]))&&s.features.push(r);for(e=0;e<i.length;e++)(r=h(i[e]))&&s.features.push(r);for(e=0;e<l.length;e++)s.features.push((n=l[e],o=void 0,y(o=w(n),f(n,["sym"])),{type:"Feature",properties:o,geometry:{type:"Point",coordinates:v(n).coordinates}}));function m(t,e){for(var r=0;r<e;r++)t.push(null);return t}function b(t,e){var r=c(t,e),n=[],o=[],a=[],i=r.length;if(i<2)return{};for(var l=0;l<i;l++){var u=v(r[l]);n.push(u.coordinates),u.time&&o.push(u.time),(u.heartRate||a.length)&&(a.length||m(a,l),a.push(u.heartRate||null))}return{line:n,times:o,heartRates:a}}function g(t){for(var e,r=c(t,"trkseg"),n=[],o=[],a=[],i=0;i<r.length;i++)if((e=b(r[i],"trkpt"))&&(e.line&&n.push(e.line),e.times&&e.times.length&&o.push(e.times),a.length||e.heartRates&&e.heartRates.length)){if(!a.length)for(var l=0;l<i;l++)a.push(m([],n[l].length));e.heartRates&&e.heartRates.length?a.push(e.heartRates):a.push(m([],e.line.length||0))}if(0!==n.length){var u=w(t);return y(u,S(p(t,"extensions"))),o.length&&(u.coordTimes=1===n.length?o[0]:o),a.length&&(u.heartRates=1===n.length?a[0]:a),{type:"Feature",properties:u,geometry:{type:1===n.length?"LineString":"MultiLineString",coordinates:1===n.length?n[0]:n}}}}function h(t){var e=b(t,"rtept");if(e.line){var r=w(t);return y(r,S(p(t,"extensions"))),{type:"Feature",properties:r,geometry:{type:"LineString",coordinates:e.line}}}}function S(t){var e={};if(t){var r=p(t,"line");if(r){var n=d(p(r,"color")),o=parseFloat(d(p(r,"opacity"))),a=parseFloat(d(p(r,"width")));n&&(e.stroke=n),isNaN(o)||(e["stroke-opacity"]=o),isNaN(a)||(e["stroke-width"]=96*a/25.4)}}return e}function w(t){var e=f(t,["name","cmt","desc","type","time","keywords"]),r=c(t,"link");r.length&&(e.links=[]);for(var n,o=0;o<r.length;o++)y(n={href:u(r[o],"href")},f(r[o],["text","type"])),e.links.push(n);return e}return s}}}()},74270:(t,e,r)=>{r.d(e,{Z:()=>u});var n=r(67294),o=r(95349);function a(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,a,i,l=[],c=!0,u=!1;try{if(a=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(l.push(n.value),l.length!==e);c=!0);}catch(t){u=!0,o=t}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return l}}(t,e)||i(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(t,e){if(t){if("string"==typeof t)return l(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?l(t,e):void 0}}function l(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var c=function(t){var e=a((0,n.useState)(),2),r=e[0],c=e[1],u=a((0,n.useState)([]),2),s=u[0],p=u[1];return(0,n.useEffect)((function(){t.data&&function(t){try{p([]);var e=(new DOMParser).parseFromString(t,"application/xml"),r=e.querySelector("metadata");null==r||r.childNodes.forEach((function(t){var e,r=t.textContent,n=t.nodeName;if("link"===t.nodeName&&(r=t.getAttribute("href")),null!==(e=r)&&void 0!==e&&e.trim().length){var o={title:n,value:r,id:(new Date).getTime()};p((function(t){return[].concat(function(t){if(Array.isArray(t))return l(t)}(e=t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(e)||i(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),[o]);var e}))}}));var n=o.Z.gpx(e);c(n)}catch(t){console.log(t)}}(t.data)}),[t.data]),{geojson:r,metadata:s}};c.defaultProps={data:void 0};const u=c;try{c.displayName="useGpx",c.__docgenInfo={description:"useGpx hook converts GPX data to GeoJSON",displayName:"useGpx",props:{data:{defaultValue:{value:"undefined"},description:"a string containing GPX data that is supposed to be parsed and converted to GeoJSON by this hook",name:"data",required:!1,type:{name:"string | undefined"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/hooks/useGpx/useGpx.tsx#useGpx"]={docgenInfo:c.__docgenInfo,name:"useGpx",path:"src/hooks/useGpx/useGpx.tsx#useGpx"})}catch(t){}},86841:(t,e,r)=>{r.d(e,{Z:()=>m});var n=r(67294),o=r(31072);function a(t){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a(t)}function i(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function l(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?i(Object(r),!0).forEach((function(e){c(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function c(t,e,r){return(e=function(t){var e=function(t,e){if("object"!==a(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!==a(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===a(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function u(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var s=["fill","line","symbol","circle","heatmap","fill-extrusion","raster","hillshade","background"];function p(t){var e,r,a,i=(0,o.Z)({mapId:t.mapId,waitForLayer:t.insertBeforeLayer}),c=(0,n.useRef)(""),p=(0,n.useRef)(""),m=(0,n.useRef)(""),d=(r=(0,n.useState)(),a=2,function(t){if(Array.isArray(t))return t}(r)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,a,i,l=[],c=!0,u=!1;try{if(a=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(l.push(n.value),l.length!==e);c=!0);}catch(t){u=!0,o=t}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return l}}(r,a)||function(t,e){if(t){if("string"==typeof t)return u(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?u(t,e):void 0}}(r,a)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),f=d[0],y=d[1],b=(0,n.useRef)(!1),g=(0,n.useRef)(t.layerId||(t.idPrefix?t.idPrefix:"Layer-")+i.componentId),v=(0,n.useCallback)((function(){var e,r,n,o,a,u,s;if(i.map&&(null==i||!i.map.cancelled)&&(i.map.map.getLayer(g.current)&&i.cleanup(),"string"!=typeof(null==t||null===(e=t.options)||void 0===e?void 0:e.source)&&i.map.map.getSource(g.current)&&i.map.map.removeSource(g.current),("string"!=typeof t.options.source||""!==t.options.source&&i.map.map.getSource(t.options.source))&&("string"==typeof(null==t||null===(r=t.options)||void 0===r?void 0:r.source)||t.geojson||null!=t&&null!==(n=t.options)&&void 0!==n&&null!==(o=n.source)&&void 0!==o&&o.data||"background"===(null==t||null===(a=t.options)||void 0===a?void 0:a.type))&&void 0!==t.options.type)){b.current=!0;try{var d,f,h,S,w,O,j,x,P,E;i.map.addLayer(l(l(l(l({},t.options),!t.geojson||null!==(d=t.options)&&void 0!==d&&d.source&&("string"==typeof(null==t||null===(f=t.options)||void 0===f?void 0:f.source)||null===(h=t.options)||void 0===h||null===(S=h.source)||void 0===S||!S.attribution||null!==(w=t.options)&&void 0!==w&&null!==(O=w.source)&&void 0!==O&&O.type)?{}:{source:{type:"geojson",data:t.geojson,attribution:"string"!=typeof(null==t||null===(j=t.options)||void 0===j?void 0:j.source)&&null!==(x=t.options.source)&&void 0!==x&&x.attribution?null===(P=t.options.source)||void 0===P?void 0:P.attribution:""}}),"string"==typeof(null===(E=t.options)||void 0===E?void 0:E.source)?{source:t.options.source}:{}),{},{id:g.current}),t.insertBeforeLayer?t.insertBeforeLayer:t.insertBeforeFirstSymbolLayer?i.map.firstSymbolLayer:void 0,i.componentId)}catch(t){console.log(t)}y((function(){var t;return null===(t=i.map)||void 0===t?void 0:t.map.getLayer(g.current)})),void 0!==t.onHover&&i.map.on("mousemove",g.current,t.onHover,i.componentId),void 0!==t.onClick&&i.map.on("click",g.current,t.onClick,i.componentId),void 0!==t.onLeave&&i.map.on("mouseleave",g.current,t.onLeave,i.componentId),i.map.on("styledata",(function(){var t;!b.current||null!==(t=i.map)&&void 0!==t&&t.map.getLayer(g.current)||v()}),i.componentId),p.current=JSON.stringify(null===(u=t.options)||void 0===u?void 0:u.paint),m.current=JSON.stringify(null===(s=t.options)||void 0===s?void 0:s.layout),c.current=t.options.type}}),[t,i]);return(0,n.useEffect)((function(){var e,r,n,o,a;i.map&&(t.geojson||t.options.source||"background"===(null==t||null===(e=t.options)||void 0===e?void 0:e.type))&&(!1===(null===(r=i.map)||void 0===r?void 0:r.cancelled)&&b.current&&null!=i&&null!==(n=i.map)&&void 0!==n&&null!==(o=n.map)&&void 0!==o&&null!==(a=o.getLayer)&&void 0!==a&&a.call(o,g.current)&&(-1===s.indexOf(t.options.type)||-1!==s.indexOf(t.options.type)&&t.options.type===c.current)||v())}),[i.map,i.mapIsReady,t,v]),(0,n.useEffect)((function(){var e,r,n,o,a,l;!0!==(null===(e=i.map)||void 0===e?void 0:e.cancelled)&&b.current&&null!==(r=i.map)&&void 0!==r&&null!==(n=r.map)&&void 0!==n&&null!==(o=n.getSource)&&void 0!==o&&o.call(n,g.current)&&(null===(a=i.map.map.getSource(g.current))||void 0===a||null===(l=a.setData)||void 0===l||l.call(a,t.geojson))}),[t.geojson,i.map,t.options.type]),(0,n.useEffect)((function(){var e,r,n,o;if(!0!==(null===(e=i.map)||void 0===e?void 0:e.cancelled)&&i.map&&null!==(r=i.map)&&void 0!==r&&null!==(n=r.map)&&void 0!==n&&null!==(o=n.getLayer)&&void 0!==o&&o.call(n,g.current)&&b.current&&t.options.type===c.current){var a,l=JSON.stringify(t.options.layout);if(t.options.layout&&l!==m.current){var u=JSON.parse(m.current);for(a in t.options.layout){var s;null!==(s=t.options.layout)&&void 0!==s&&s[a]&&t.options.layout[a]!==u[a]&&i.map.map.setLayoutProperty(g.current,a,t.options.layout[a])}m.current=l}var d=JSON.stringify(t.options.paint);if(d!==p.current){var f=JSON.parse(p.current);for(a in t.options.paint){var y;null!==(y=t.options.paint)&&void 0!==y&&y[a]&&t.options.paint[a]!==f[a]&&i.map.map.setPaintProperty(g.current,a,t.options.paint[a])}p.current=d}}}),[t.options,i.map]),(0,n.useEffect)((function(){t.insertBeforeLayer&&i.map&&i.map.getLayer(t.insertBeforeLayer)&&i.map.getLayer(g.current)&&i.map.moveLayer(g.current,t.insertBeforeLayer)}),[i.map,t.insertBeforeLayer]),(0,n.useEffect)((function(){return function(){b.current=!1,i.cleanup()}}),[]),(0,n.useEffect)((function(){var e,r,n,o,a,l;if(!("string"!=typeof(null==t||null===(e=t.options)||void 0===e?void 0:e.source)||!i.map||"string"==typeof(null==t||null===(r=t.options)||void 0===r?void 0:r.source)&&null!=i&&null!==(n=i.map)&&void 0!==n&&null!==(o=n.getLayer)&&void 0!==o&&o.call(n,g.current)&&null!=i&&null!==(a=i.map)&&void 0!==a&&null!==(l=a.getSource)&&void 0!==l&&l.call(a,t.options.source))){var c=function(){var e,r,n;"string"==typeof(null==t||null===(e=t.options)||void 0===e?void 0:e.source)&&null!=i&&null!==(r=i.map)&&void 0!==r&&null!==(n=r.getSource)&&void 0!==n&&n.call(r,t.options.source)&&v()};return i.map.on("sourcedata",c),function(){null!=i&&i.map&&i.map.off("sourcedata",c)}}}),[i.map,null===(e=t.options)||void 0===e?void 0:e.source]),{map:i.map,layer:f,layerId:g.current,componentId:i.componentId,mapHook:i}}p.defaultProps={};const m=p},23166:(t,e,r)=>{r.d(e,{Z:()=>a});var n=r(67294),o=r(26048);const a=function(){return(0,n.useContext)(o.Z)}},31805:(t,e,r)=>{r.d(e,{Z:()=>a});var n=r(67294),o=r(31072);const a=function(t){var e=(0,o.Z)({mapId:t.mapId});return(0,n.useEffect)((function(){if(e.map&&t.layerId&&t.filter&&e.map.map.getLayer(t.layerId)){var r=t.layerId;return e.map.map.setFilter(r,t.filter),function(){e.map&&e.map.map.setFilter(r,null)}}}),[t,e.map]),{}}},77062:(t,e,r)=>{r.d(e,{Z:()=>l});var n=r(67294),o=r(31072),a=r(24613),i=function(t){var e=(0,o.Z)({mapId:t.mapId,waitForLayer:t.layerId}),r=(0,n.useRef)(new a.Popup({closeButton:!1,closeOnClick:!0}));return(0,n.useEffect)((function(){e.map&&t.layerId&&e.map.on("mouseenter",t.layerId,(function(n){var o,a;if(e.map){var i=null==n||null===(o=n.features)||void 0===o?void 0:o[0].geometry.coordinates.slice(),l="";if(null!=n&&null!==(a=n.features)&&void 0!==a&&a[0]&&"function"==typeof t.getPopupContent&&(l=t.getPopupContent(n.features[0])),null!=i&&i[0]){for(;Math.abs(n.lngLat.lng-i[0])>180;)i[0]+=n.lngLat.lng>i[0]?360:-360;r.current.setLngLat(i).setHTML(l).addTo(e.map.map)}}}),e.componentId)}),[e.map]),n.createElement(n.Fragment,null)};i.defaultProps={mapId:void 0};const l=i;try{i.displayName="useLayerHoverPopup",i.__docgenInfo={description:"useLayerHoverPopup hook registers a mouseenter event to display feature properties in a MapLibre popup if a feature on the configured layer is hovered",displayName:"useLayerHoverPopup",props:{mapId:{defaultValue:{value:"undefined"},description:"Id of the target MapLibre instance in mapContext",name:"mapId",required:!1,type:{name:"string | undefined"}},layerId:{defaultValue:null,description:"Id of an existing layer in the mapLibre instance this event will be registered to",name:"layerId",required:!1,type:{name:"string | undefined"}},getPopupContent:{defaultValue:null,description:"",name:"getPopupContent",required:!0,type:{name:"(feature: GeoJSONFeature) => string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/hooks/useLayerHoverPopup/useLayerHoverPopup.tsx#useLayerHoverPopup"]={docgenInfo:i.__docgenInfo,name:"useLayerHoverPopup",path:"src/hooks/useLayerHoverPopup/useLayerHoverPopup.tsx#useLayerHoverPopup"})}catch(t){}},31072:(t,e,r)=>{r.d(e,{Z:()=>c});var n=r(67294),o=r(28721),a=r(74736),i=r(90686);function l(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}const c=function(t){var e,r,c=(0,n.useContext)(a.Z),u=(e=(0,n.useState)({map:void 0,ready:!1}),r=2,function(t){if(Array.isArray(t))return t}(e)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,a,i,l=[],c=!0,u=!1;try{if(a=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(l.push(n.value),l.length!==e);c=!0);}catch(t){u=!0,o=t}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return l}}(e,r)||function(t,e){if(t){if("string"==typeof t)return l(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?l(t,e):void 0}}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),s=u[0],p=u[1],m=(0,i.Z)({mapId:null==t?void 0:t.mapId,watch:{viewport:!1,layers:!(null==t||!t.waitForLayer),sources:!1},filter:{includeBaseLayers:!0}}),d=(0,n.useRef)(),f=(0,n.useRef)((0,o.Z)()),y=function(){d.current&&d.current.cleanup(f.current)};return(0,n.useEffect)((function(){return function(){y(),d.current=void 0}}),[]),(0,n.useEffect)((function(){if(d.current&&!0===d.current.cancelled&&(d.current=void 0,p({map:void 0,ready:!1})),!d.current&&c.mapExists(null==t?void 0:t.mapId)){if(null!=t&&t.waitForLayer){var e,r=!1;if(null==m||null===(e=m.layers)||void 0===e||e.forEach((function(e){e.id===(null==t?void 0:t.waitForLayer)&&(r=!0)})),!r)return}d.current=c.getMap(null==t?void 0:t.mapId),p({map:d.current,ready:!0})}}),[c.mapIds,m.layers,c,t]),{map:s.map,mapIsReady:s.ready,componentId:f.current,layers:m.layers,cleanup:y}}},90686:(t,e,r)=>{r.d(e,{Z:()=>p});var n=r(67294),o=r(45697),a=r.n(o),i=r(28721),l=r(74736);function c(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,a,i,l=[],c=!0,u=!1;try{if(a=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(l.push(n.value),l.length!==e);c=!0);}catch(t){u=!0,o=t}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return l}}(t,e)||function(t,e){if(t){if("string"==typeof t)return u(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?u(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function s(t){var e=(0,n.useContext)(l.Z),r=(0,n.useRef)(!1),o=(0,n.useRef)(),a=c((0,n.useState)(),2),u=a[0],s=a[1],p=(0,n.useRef)(void 0),m=c((0,n.useState)([]),2),d=m[0],f=m[1],y=(0,n.useRef)(),b=(0,n.useRef)((0,i.Z)()),g=(0,n.useCallback)((function(e){var r,n;return!(!(null!=t&&null!==(r=t.filter)&&void 0!==r&&r.includeBaseLayers||null==e)&&e.baseLayer)&&(void 0===(null===(n=t.filter)||void 0===n?void 0:n.matchLayerIds)||(t.filter.matchLayerIds instanceof RegExp?t.filter.matchLayerIds.test(e.id):e.id.includes(t.filter.matchLayerIds)))}),[t.filter]),v=(0,n.useCallback)((function(){if(o.current){var t=o.current.wrapper.layerState.filter(g),e=JSON.stringify(t);y.current!==e&&(y.current=e,f(t))}}),[g]);return(0,n.useEffect)((function(){var t=b.current;return function(){o.current&&(o.current.cleanup(t),o.current=void 0),r.current=!1}}),[]),(0,n.useEffect)((function(){var n,a,i,l;e.mapExists(t.mapId)&&!r.current&&(r.current=!0,o.current=e.getMap(t.mapId),o.current?(null!=t&&null!==(n=t.watch)&&void 0!==n&&n.viewport&&(s(o.current.wrapper.viewportState),o.current.wrapper.on("viewportchange",(function(){var t,e;p.current!==(null===(t=o.current)||void 0===t?void 0:t.wrapper.viewportStateString)&&s(null===(e=o.current)||void 0===e?void 0:e.wrapper.viewportState)}),b.current)),null!=t&&null!==(a=t.watch)&&void 0!==a&&a.layers&&(v(),o.current.wrapper.on("layerchange",v,{includeBaseLayers:null==t||null===(i=t.filter)||void 0===i?void 0:i.includeBaseLayers,matchLayerIds:null==t||null===(l=t.filter)||void 0===l?void 0:l.matchLayerIds},b.current))):r.current=!1)}),[e.mapIds,e,t.mapId,v,t]),{layers:d,viewport:u}}s.defaultProps={mapId:void 0,watch:{layers:!0,sources:!1,viewport:!1},filter:{includeBaseLayers:!1}},s.propTypes={mapId:a().string,watch:a().shape({layers:a().bool,sources:a().bool,viewport:a().bool}),filter:a().shape({includeBaseLayers:a().bool,matchLayerIds:a().oneOfType([a().string,a().instanceOf(RegExp)]),matchSourceIds:a().oneOfType([a().string,a().instanceOf(RegExp)])})};const p=s},13116:(t,e,r)=>{r.d(e,{Z:()=>s});var n=r(67294),o=r(31072);function a(t){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a(t)}function i(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function l(t,e,r){return(e=function(t){var e=function(t,e){if("object"!==a(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!==a(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===a(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function c(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,a,i,l=[],c=!0,u=!1;try{if(a=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(l.push(n.value),l.length!==e);c=!0);}catch(t){u=!0,o=t}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return l}}(t,e)||function(t,e){if(t){if("string"==typeof t)return u(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?u(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}const s=function(t){var e,r=(0,o.Z)({mapId:t.mapId}),a=c((0,n.useState)(),2),u=a[0],s=a[1],p=(0,n.useRef)(t.sourceId||(t.idPrefix?t.idPrefix:"Source-")+r.componentId),m=(0,n.useCallback)((function(){var t,e;if(r.map&&null!==(t=r.map)&&void 0!==t&&null!==(e=t.style)&&void 0!==e&&e._layers){for(var n=0,o=Object.entries(r.map.map.style._layers);n<o.length;n++){var a=c(o[n],2),i=a[0];a[1].source===p.current&&r.map.removeLayer(i)}r.map.getSource(p.current)&&r.map.removeSource(p.current)}}),[r.map]),d=(0,n.useCallback)((function(){var e;r.map&&("geojson"!==t.source.type||t.source.data)&&(r.map.map.getSource(p.current)&&m(),null===(e=r.map)||void 0===e||e.addSource(p.current,function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?i(Object(r),!0).forEach((function(e){l(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({},t.source)),s(r.map.map.getSource(p.current)))}),[t,r,m]);return(0,n.useEffect)((function(){var e,n,o,a;null!==(e=r.map)&&void 0!==e&&null!==(n=e.map)&&void 0!==n&&n.getSource(p.current)&&(null===(o=r.map.map.getSource(p.current))||void 0===o||null===(a=o.setData)||void 0===a||a.call(o,t.source.data))}),[null===(e=t.source)||void 0===e?void 0:e.data]),(0,n.useEffect)((function(){var e,n,o;null!=r&&null!==(e=r.map)&&void 0!==e&&null!==(n=e.map)&&void 0!==n&&null!==(o=n.getSource)&&void 0!==o&&o.call(n,t.sourceId)&&t.sourceId===p.current||(p.current=t.sourceId,d())}),[r.map,t,d]),(0,n.useEffect)((function(){return function(){m()}}),[m]),{map:r.map,source:u,componentId:r.componentId,mapHook:r}}},25969:(t,e,r)=>{r.d(e,{Z:()=>m});var n=r(67294),o=r(59542);function a(t){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a(t)}function i(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function l(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?i(Object(r),!0).forEach((function(e){c(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function c(t,e,r){return(e=function(t){var e=function(t,e){if("object"!==a(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!==a(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===a(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function u(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,a,i,l=[],c=!0,u=!1;try{if(a=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(l.push(n.value),l.length!==e);c=!0);}catch(t){u=!0,o=t}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return l}}(t,e)||function(t,e){if(t){if("string"==typeof t)return s(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?s(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function p(t){var e=u((0,n.useState)(),2),r=e[0],a=e[1],i=u((0,n.useState)(t.url),2),c=i[0],s=i[1],p=u((0,n.useState)(""),2),m=p[0],d=p[1],f=u((0,n.useState)(),2),y=f[0],b=f[1],g=u((0,n.useState)(),2),v=g[0],h=g[1],S=function(){a(void 0),b(void 0),d("")};return(0,n.useEffect)((function(){var e;if(S(),h(void 0),c){var r,n=c;-1!==c.indexOf("?")&&(n=(r=c.split("?"))[0]);var a=new URLSearchParams(null===(e=r)||void 0===e?void 0:e[1]),i=l(l({},Object.fromEntries(a)),t.urlParameters),u=new URLSearchParams(i),s=decodeURIComponent(u.toString())+"".replace(/%2F/g,"/").replace(/%3A/g,":");fetch(n+"?"+s).then((function(t){if(t.ok)return t.text();throw Error(t.statusText+" ("+t.status+" - "+t.type+")")})).then((function(t){b(new o.Z(t,window.DOMParser).toJSON())})).catch((function(t){S(),console.log(t),h(t.message)}))}}),[c,t.urlParameters]),(0,n.useEffect)((function(){var t,e,r,n,o,i,l,c,u,s,p,m,f,b;null!=y&&y.Service&&(d(null===(t=y.Capability)||void 0===t||null===(e=t.Request)||void 0===e||null===(r=e.GetMap)||void 0===r||null===(n=r.DCPType)||void 0===n||null===(o=n[0])||void 0===o||null===(i=o.HTTP)||void 0===i||null===(l=i.Get)||void 0===l?void 0:l.OnlineResource),a(null===(c=y.Capability)||void 0===c||null===(u=c.Request)||void 0===u||null===(s=u.GetFeatureInfo)||void 0===s||null===(p=s.DCPType)||void 0===p||null===(m=p[0])||void 0===m||null===(f=m.HTTP)||void 0===f||null===(b=f.Get)||void 0===b?void 0:b.OnlineResource))}),[y]),{capabilities:y,getFeatureInfoUrl:r,wmsUrl:m,error:v,setUrl:s}}p.defaultProps={url:"",urlParameters:{SERVICE:"WMS",VERSION:"1.3.0",REQUEST:"GetCapabilities"}};const m=p},49004:(t,e,r)=>{r.d(e,{vm:()=>o.Z,tw:()=>n.t,X$:()=>n.Z,bQ:()=>a.Z}),r(7491),r(83730),r(74582),r(11624),r(29093),r(28883),r(70769),r(50228),r(74297),r(93482),r(61488),r(30426),r(76956),r(18399),r(89798),r(74168),r(16804),r(6546),r(58725),r(50850),r(9277),r(87779),r(72741),r(78245),r(71332),r(26109),r(56357),r(46871),r(21624),r(32714),r(16439),r(18128),r(74767),r(48703),r(66639),r(19573),r(77393),r(51834),r(46846),r(76273),r(74270),r(31805),r(77062),r(86841),r(67294),r(90686),r(31072);Object.keys({mousedown:"touchstart",mouseup:"touchend",mousemove:"touchmove"}),r(13116),r(25969),r(81919),r(23166),r(52122),r(14573);var n=r(74736),o=(r(15668),r(74054),r(26048),r(26778),r(79485),r(44598),r(94939),r(83658),r(68798),r(82651)),a=(r(13356),r(22790),r(77602),r(60136),r(4305),r(67704),r(18434),r(17781),r(39307),r(22305),r(28567),r(53747),r(52404),r(22281),r(53426),r(54852));r(59523),r(93826)}}]);